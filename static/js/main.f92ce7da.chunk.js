(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{213:function(e,t,n){},214:function(e,t,n){"use strict";n.r(t);var c,a=n(13),s=n(0),r=n.n(s),i=n(42),o=n.n(i),l=n(46),j=n.n(l),b=n(97),d=n(60),u=n(36),O=n(3),h=(n(94),n(238)),m=n(239),x=n(240),p=n(241),f=n(221),g=n(222),v=n(223),w=n(2),S=n(39),y=function(e){var t=e.onOpenModal,n=e.onOpenEvent,c=Object(s.useState)([]),r=Object(a.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(1),j=Object(a.a)(l,2),b=j[0],d=j[1],h=Object(s.useState)(0),m=Object(a.a)(h,2),x=m[0],p=m[1],y=Object(s.useState)(15),C=Object(a.a)(y,1)[0],k=Object(s.useState)(!0),E=Object(a.a)(k,2),N=E[0],I=E[1],M=Object(s.useState)(!1),T=Object(a.a)(M,2),L=T[0],P=T[1];Object(s.useEffect)((function(){N&&S.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Events?$count=true&$top=".concat(C,"&$skip=").concat((b-1)*C,"&$expand=organizer($select=username)")).then((function(e){o([].concat(Object(u.a)(i),Object(u.a)(e.data.value))),p(e.data["@odata.count"]),d((function(e){return e+1}))})).finally((function(){P(!1),I(!1)}))}),[N]),Object(s.useEffect)((function(){return window.addEventListener("scroll",D),function(){window.removeEventListener("scroll",D)}}),[]),Object(s.useEffect)((function(){L&&i.length<x&&I(!0)}),[L]);var D=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&P(!0)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,after:Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.H,{onClick:function(){return t("filter")},children:Object(w.jsx)(f.a,{})}),Object(w.jsx)(O.H,{children:Object(w.jsx)(g.a,{})})]}),children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(w.jsx)(O.t,{children:Object(w.jsxs)(O.z,{children:[i.map((function(e){return Object(w.jsx)(O.g,{size:"l",children:Object(w.jsx)(O.f,{mode:"shadow",children:Object(w.jsxs)("div",{className:"eventCardInner",children:[Object(w.jsx)(O.Y,{level:"1",style:{marginBottom:5},children:e.name}),Object(w.jsx)(O.W,{className:"eventDescription",children:e.descr}),Object(w.jsxs)("div",{className:"eventBottom",children:[Object(w.jsx)(O.w,{className:"eventBottomItem",header:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440",children:e.organizer.username}),Object(w.jsx)(O.w,{className:"eventBottomItem",header:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",children:new Date(e.timeStamp).toLocaleString("ru-RU",{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"numeric"})})]}),Object(w.jsx)(O.v,{onClick:function(){return n(e.ID)},className:"eventInfoButton",children:Object(w.jsx)(v.a,{})})]})})},e.ID)})),N&&Object(w.jsx)(O.R,{})]})})]})},C=n(39),k=Object(s.createContext)(),E=function(e){var t=e.children,n=Object(s.useState)([]),c=Object(a.a)(n,2),r=c[0],i=c[1],o=Object(s.useState)(1),l=Object(a.a)(o,2),j=l[0],b=l[1],d=Object(s.useState)(0),O=Object(a.a)(d,2),h=O[0],m=O[1],x=Object(s.useState)(15),p=Object(a.a)(x,1)[0],f=Object(s.useState)(!0),g=Object(a.a)(f,2),v=g[0],S=g[1],y=Object(s.useState)(!1),E=Object(a.a)(y,2),N=E[0],I=E[1];Object(s.useEffect)((function(){v&&C.get("https://jsonplaceholder.typicode.com/posts?_limit=".concat(p,"&_page=").concat(j)).then((function(e){i([].concat(Object(u.a)(r),Object(u.a)(e.data.filter((function(e){return r.findIndex((function(t){return t.id==e.id}))<0}))))),b((function(e){return e+1})),m(e.headers["x-total-count"])})).finally((function(){I(!1),S(!1)}))}),[v]),Object(s.useEffect)((function(){return window.addEventListener("scroll",M),function(){window.removeEventListener("scroll",M)}}),[]),Object(s.useEffect)((function(){N&&r.length<h&&S(!0)}),[N]);var M=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&I(!0)};return Object(w.jsx)(k.Provider,{value:{chats:r,fetching:v},children:t})},N=function(e){var t=e.onChatOpen,n=Object(s.useContext)(k),c=n.chats,a=n.fetching;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(w.jsx)(O.t,{children:Object(w.jsxs)(O.z,{children:[c.map((function(e){return Object(w.jsx)(O.P,{before:Object(w.jsx)(O.x,{gradientColor:Object(O.fb)(e.id),children:e.title.substring(0,2)}),onClick:function(){return t(e)},subtitle:Object(w.jsxs)(w.Fragment,{children:[(n="\u0410\u043b\u0435\u043a\u0441\u0435\u0439: \u0441\u0442\u0438\u043a\u0435\u0440 cnbrth cnbrth cnbrth cnbrt",c=25,n.length>c?n.substring(0,c)+"...":n)," \xb7 2h"]}),indicator:Object(w.jsx)(O.k,{mode:"primary",children:"10"}),children:e.title.substring(0,10)},e.id);var n,c})),a&&Object(w.jsx)(O.R,{})]})})]})},I=n(224),M=n(225),T=n(226),L=n(229),P=n(230),D=n(227),H=n(228),z=n(39),B=n.n(z),F=function(e,t){var n=Object(s.useState)((function(){var n=localStorage.getItem(t);return n?JSON.parse(n):e})),c=Object(a.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){localStorage.setItem(t,JSON.stringify(r))}),[r]),[r,i]},U=function(e){var t=e.user,n=e.hasBack,c=e.onClose,r=Object(s.useState)(null),i=Object(a.a)(r,2),o=i[0],l=i[1],j=F(null,"user"),b=Object(a.a)(j,1)[0];Object(s.useEffect)((function(){B.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users/".concat(t)).then((function(e){l(e.data)}))}),[]);var d;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,before:n&&Object(w.jsx)(O.G,{onClick:c}),after:o&&b==o.ID&&Object(w.jsx)(O.H,{onClick:function(){localStorage.removeItem("user"),location.reload()},children:Object(w.jsx)(I.a,{})}),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),!o&&Object(w.jsx)(O.t,{children:Object(w.jsx)(O.R,{})}),o&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(O.t,{children:[Object(w.jsxs)(O.s,{mode:"tint",to:"top",className:"profileBIO",children:[Object(w.jsx)(O.x,{size:96,gradientColor:Object(O.fb)(Number(o.phoneNumber%10)),children:o.username.substring(0,2)}),Object(w.jsx)(O.Y,{level:"2",width:"2",className:"profileTitle",children:o.username}),Object(w.jsx)(O.W,{className:"profileSubTitle",children:o.bio}),b!=o.ID&&Object(w.jsxs)(O.e,{children:[Object(w.jsx)(O.d,{size:"m",sizeY:"compact",children:Object(w.jsx)(M.a,{})}),Object(w.jsx)(O.d,{size:"m",sizeY:"compact",before:Object(w.jsx)(T.a,{}),children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c"})]})]}),Object(w.jsx)(O.t,{header:Object(w.jsx)(O.u,{mode:"secondary",children:"\u0414\u0440\u0443\u0437\u044c\u044f"}),children:Object(w.jsx)(O.P,{className:"profileFriends",before:Object(w.jsx)(O.Z,{size:"m",photos:["https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg","https://www.ixbt.com/img/n1/news/2018/7/4/341109.png","https://cdni.rt.com/russian/images/2022.09/article/63231abe02e8bd743524f678.png"]}),after:Object(w.jsx)(D.a,{width:30,height:30}),children:"1377 \u0434\u0440\u0443\u0437\u0435\u0439"})})]}),Object(w.jsxs)(O.t,{header:Object(w.jsx)(O.u,{mode:"secondary",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:[Object(w.jsx)(O.A,{before:Object(w.jsx)(H.a,{}),textLevel:"primary",children:o.phoneNumber}),Object(w.jsx)(O.A,{before:Object(w.jsx)(L.a,{}),textLevel:"primary",children:o.email}),Object(w.jsx)(O.A,{before:Object(w.jsx)(P.a,{}),textLevel:"primary",children:(d=o.dateOfBirth,new Date(d).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric"}))})]}),Object(w.jsx)(O.t,{header:Object(w.jsx)(O.u,{mode:"secondary",children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u0438\u0433\u0440\u044b"}),children:Object(w.jsxs)(O.z,{children:[Object(w.jsx)(O.h,{before:Object(w.jsx)(O.c,{src:"https://s2-goods.ozstatic.by/2000/42/893/10/10893042_0.jpg"}),description:"Carcassonne",children:"\u041a\u0430\u0440\u043a\u0430\u0441\u0441\u043e\u043d"}),Object(w.jsx)(O.h,{before:Object(w.jsx)(O.c,{src:"https://avatars.mds.yandex.net/get-mpic/6382710/img_id8546741754982085445.jpeg/orig"}),description:"Monopoly",children:"\u041c\u043e\u043d\u043e\u043f\u043e\u043b\u0438\u044f"}),Object(w.jsx)(O.h,{before:Object(w.jsx)(O.c,{src:"https://igromaster.by/upload/iblock/972/972ee18fcf89183f221bab04bcff0668.jpg"}),description:"Uno",children:"\u0423\u0301\u043d\u043e"})]})})]})]})},A=n(112),R=n(96),J=n.n(R),W=Object(s.createContext)(),Y=function(){return Object(s.useContext)(W)},_=function(e){var t=e.children,n=e.chat,r=Object(s.useState)([]),i=Object(a.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)([]),b=Object(a.a)(j,2),d=b[0],O=b[1],h=Object(s.useState)(!0),m=Object(a.a)(h,2),x=m[0],p=m[1],f=Object(s.useState)(1),g=Object(a.a)(f,2),v=g[0],S=g[1],y=Object(s.useState)(0),C=Object(a.a)(y,2),k=C[0],E=C[1],N=Object(s.useState)(30),I=Object(a.a)(N,1)[0],M=Object(s.useState)(!1),T=Object(a.a)(M,2),L=T[0],P=T[1],D=Object(s.useState)(!0),H=Object(a.a)(D,2),z=H[0],F=H[1],U=Object(s.useState)(2),R=Object(a.a)(U,2),Y=R[0],_=R[1],V=Object(s.useState)(!1),q=Object(a.a)(V,2),$=q[0],K=q[1];Object(s.useEffect)(Object(A.a)(J.a.mark((function e(){var t;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users");case 2:t=e.sent,O(Object(u.a)(t.data.value)),setTimeout((function(){X()}),500);case 5:case"end":return e.stop()}}),e)}))),[]),Object(s.useEffect)((function(){return(c=new WebSocket("ws://192.168.160.194:8087/hello")).addEventListener("opne",Q),function(){c.removeEventListener("opne",Q),c.close()}}),[]),Object(s.useEffect)((function(){x&&d.length>0&&X()}),[x]),Object(s.useEffect)((function(){n.members=d}),[d]);var X=function(){B.a.get("https://jsonplaceholder.typicode.com/comments?_limit=".concat(I,"&_page=").concat(v)).then((function(e){l([].concat(Object(u.a)(e.data),Object(u.a)(o))),S((function(e){return e+1})),E(e.headers["x-total-count"])})).finally((function(){P(!1),p(!1),1==v&&window.scrollTo(window.scrollX,document.body.scrollHeight)}))};Object(s.useEffect)((function(){return window.addEventListener("scroll",G),function(){window.removeEventListener("scroll",G)}}),[]),Object(s.useEffect)((function(){L&&o.length<k&&p(!0)}),[L]);var G=function(e){F(!1),e.target.documentElement.scrollTop<100&&P(!0),e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&F(!0)},Q=function(e){K(!0),console.log(e)};return Object(w.jsx)(W.Provider,{value:{messages:o,fetching:x,members:d,chat:n,needScroll:z,limit:I,currentPage:v,sendMessage:function(e){F(!0);var t={senderId:1,chatId:2,email:"test@test.test",body:e};c.send(JSON.stringify(t)),l([].concat(Object(u.a)(o),[t])),_((function(e){return e+1}))},endOfPage:L,newMessageCount:Y,openSocket:$},children:t})},V=function(e){var t=e.text;return Object(w.jsxs)("div",{className:"textSeparator",children:[Object(w.jsx)("div",{className:"line"}),Object(w.jsx)("div",{className:"text",children:t})]})},q=function(e){var t=e.self,n=void 0!==t&&t,c=e.text,a=e.caption,s=void 0===a?"":a,r=e.hasAvatar,i=void 0!==r&&r,o=e.avatar,l=e.title,j=e.id;return Object(w.jsxs)("div",{className:"messageBox ".concat(n?"self":""),children:[i&&o&&Object(w.jsx)(O.c,{size:25}),i&&!o&&Object(w.jsx)(O.x,{size:25,gradientColor:Object(O.fb)(j),children:l.substring(0,2)}),Object(w.jsxs)("div",{className:"messageTextBox ".concat(n?"self":""),children:[!n&&Object(w.jsx)("div",{className:"messageTitle",children:l}),Object(w.jsx)("div",{children:c}),s&&Object(w.jsx)("div",{className:"messageCaption",children:s})]})]})},$=function(e){var t=e.isPublic,n=void 0===t||t,c=Object(s.useState)(0),i=Object(a.a)(c,2),o=i[0],l=i[1],j=Y(),b=j.messages,d=j.fetching,u=j.needScroll,h=j.newMessageCount,m=j.endOfPage,x=Object(s.useState)(window.innerHeight),p=Object(a.a)(x,2),f=p[0],g=p[1],v=Object(s.useState)(!1),S=Object(a.a)(v,2),y=S[0],C=S[1],k=Object(s.useRef)(null);Object(s.useLayoutEffect)((function(){m&&window.scrollTo(window.scrollX,document.body.scrollTop+document.documentElement.scrollHeight-o),u&&k.current.scrollIntoView({behavior:"smooth"})}),[b]),Object(s.useLayoutEffect)((function(){m&&l(document.documentElement.scrollHeight)}),[m]),Object(s.useEffect)((function(){y&&(f-window.innerHeight>0&&window.scrollTo(window.scrollX,window.scrollY+f-window.innerHeight),f-window.innerHeight<0&&document.documentElement.scrollHeight-(document.documentElement.scrollTop+window.innerHeight)>Math.abs(f-window.innerHeight)&&window.scrollTo(window.scrollX,window.scrollY+f-window.innerHeight),g(window.innerHeight),C(!1))}),[y]);var E=function(){C(!0)};return Object(s.useEffect)((function(){return window.addEventListener("resize",E),function(){return window.removeEventListener("resize",E)}}),[]),Object(w.jsxs)(w.Fragment,{children:[d&&Object(w.jsx)(O.R,{style:{marginTop:10}}),Object(w.jsx)("div",{className:"messageList",children:b.map((function(e,t,c){return Object(w.jsxs)(r.a.Fragment,{children:[c.length-t==h&&Object(w.jsx)(V,{text:"\u041d\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(w.jsx)(q,{text:e.body,caption:e.id,hasAvatar:e.id%2==1&&n,self:e.id%2==0,title:n&&e.email,avatar:e.avatar,id:e.id})]},t)}))}),Object(w.jsx)("div",{ref:k})]})},K=n(231),X=function(e){var t=e.onClose,n=e.onOpenChatMembersList,c=Object(s.useState)(""),r=Object(a.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)(0),j=Object(a.a)(l,2),b=j[0],d=j[1],u=Object(s.useRef)(),h=Y(),m=h.chat,x=h.sendMessage,p=h.openSocket,f=h.members;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,before:Object(w.jsx)(O.G,{onClick:t}),after:f.length>0&&Object(w.jsx)(O.H,{onClick:n,children:Object(w.jsx)(K.a,{})}),children:Object(w.jsx)(O.J,{before:Object(w.jsx)(O.x,{size:36,gradientColor:Object(O.fb)(m.id),children:m.title.substring(0,2)}),status:"".concat(f.length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"),children:m.title.substring(0,10)})}),Object(w.jsx)($,{}),Object(w.jsx)(O.o,{vertical:"bottom",style:{paddingBottom:0},children:Object(w.jsxs)("div",{ref:u,children:[Object(w.jsx)(O.O,{wide:!0}),Object(w.jsx)(O.db,{value:i,onChange:function(e){return o(e.target.value)},onHeightChange:function(){return function(){var e=u.current;if(e){var t=e.offsetHeight;t!==b&&d(t)}}()},placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",after:Object(w.jsx)(s.Fragment,{children:Object(w.jsx)(O.eb,{mode:"send",disabled:0===i.length||!p,onClick:function(){return x(i),void o("")}})})})]})})]})},G=function(e){var t=e.onClose,n=e.chat,c=e.onOpenProfile;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,before:Object(w.jsx)(O.G,{onClick:t}),children:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"}),Object(w.jsxs)(O.t,{className:"d-f-center",children:[Object(w.jsx)(O.x,{size:100,gradientColor:Object(O.fb)(n.id),children:n.title.substring(0,2)}),Object(w.jsx)(O.Y,{children:n.title.substring(0,10)})]}),Object(w.jsx)(O.t,{children:Object(w.jsx)(O.z,{children:n.members.map((function(e){return Object(w.jsx)(O.P,{before:Object(w.jsx)(O.x,{size:48,gradientColor:Object(O.fb)(Number(e.phoneNumber%10)),children:e.username.substring(0,2)}),subtitle:e.bio,onClick:function(){return c(e.ID)},children:e.username},e.ID)}))})})]})},Q=n(90),Z=function(e){var t=e.event,n=e.onOpenEvent,c=Object(s.useState)(null),r=Object(a.a)(c,2),i=r[0],o=r[1];return Object(w.jsx)("div",{className:"mapMarkerWrapper",children:Object(w.jsxs)("div",{onClick:function(e){e.stopPropagation(),e.target.closest(".mapMarkerInner").classList.add("clicked"),setTimeout((function(){n&&n(t.ID),e.target.closest(".mapMarkerInner").classList.remove("clicked")}),100)},onTouchEnd:function(e){clearTimeout(i)},onTouchStart:function(e){e.stopPropagation(),e.preventDefault(),o(setTimeout((function(){return function(e){e.target.closest(".mapMarkerInner").querySelector(".mapMarkerMore").classList.add("touch"),e.target.closest(".mapMarkerInner").querySelector(".close").classList.add("active")}(e)}),700))},className:"mapMarkerInner",children:[Object(w.jsx)("div",{className:"mapMarkerInfo",children:Object(w.jsxs)("div",{className:"mapMarkerContent",children:[Object(w.jsx)("div",{className:"mapMarkerTitle",children:t.name}),Object(w.jsx)("div",{className:"mapMarkerText",children:new Date(t.timeStamp).toLocaleString("ru-RU",{day:"numeric",month:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"})}),Object(w.jsx)("div",{className:"mapMarkerMore",children:t.descr})]})}),Object(w.jsx)("div",{className:"mapBottom"}),Object(w.jsx)("div",{className:"close",onClick:function(e){e.stopPropagation(),e.target.closest(".mapMarkerInner").querySelector(".mapMarkerMore").classList.remove("touch"),e.target.closest(".mapMarkerInner").querySelector(".close").classList.remove("active")},children:Object(w.jsx)(g.a,{width:15,height:15})})]})})},ee=function(e){var t=e.onOpenEvent,n=Object(s.useState)(null),c=Object(a.a)(n,2),r=c[0],i=c[1];return Object(s.useEffect)((function(){B.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Events").then((function(e){i(e.data.value)}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{separator:!1,className:"shadowPanelHeader",children:"\u041a\u0430\u0440\u0442\u0430 \u0441\u043e\u0431\u044b\u0442\u0438\u0439"}),Object(w.jsxs)(O.t,{className:"mapGroup",children:[!r&&Object(w.jsx)(O.R,{}),r&&Object(w.jsx)(Q.a,{bootstrapURLKeys:{key:"AIzaSyBY3XkvjucuJx55bzFZMTJQnYH5JnWK8SQ"},defaultCenter:{lat:53.90478949220637,lng:27.54735640149058},defaultZoom:11,children:r.map((function(e){return Object(w.jsx)(Z,{onOpenEvent:t,event:e,lat:e.coords_lat,lng:e.coords_lng})}))})]})]})},te=n(242),ne=(n(212),n(232)),ce=n(233),ae=n(234),se=n(235),re=n(236),ie=n(237),oe=function(e){var t=e.event,n=e.onClose,c=Object(s.useState)(null),r=Object(a.a)(c,2),i=r[0],o=r[1];return Object(s.useEffect)((function(){B.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Events/".concat(t,"?$expand=members,organizer($select=username)")).then((function(e){o(e.data)}))}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(O.F,{separator:!1,className:"shadowPanelHeader",before:Object(w.jsx)(O.G,{onClick:n}),children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0441\u043e\u0431\u044b\u0442\u0438\u0438"}),Object(w.jsxs)(O.t,{children:[i&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)(O.t,{style:{padding:"0px 10px"},children:[Object(w.jsx)(O.Y,{level:"1",style:{marginBottom:5},children:i.name}),Object(w.jsx)(O.W,{className:"eventDescription",children:i.descr})]}),Object(w.jsxs)(O.t,{style:{padding:"0px 10px"},children:[Object(w.jsx)(O.A,{before:Object(w.jsx)(ne.a,{width:20,height:20}),children:i.organizer.username}),Object(w.jsx)(O.A,{before:Object(w.jsx)(ce.a,{}),children:new Date(i.timeStamp).toLocaleString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"numeric",minute:"numeric"})}),Object(w.jsxs)(O.A,{before:Object(w.jsx)(ae.a,{}),children:[i.members.length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"]}),Object(w.jsx)(O.A,{before:Object(w.jsx)(se.a,{}),children:i.address})]}),Object(w.jsx)(O.t,{style:{padding:"0px 10px"},children:Object(w.jsxs)(O.e,{className:"eventInfoButtons",children:[Object(w.jsx)(O.d,{before:Object(w.jsx)(re.a,{}),mode:"outline",children:"\u041f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f"}),Object(w.jsx)(O.d,{before:Object(w.jsx)(ie.a,{}),mode:"outline",children:"\u0427\u0430\u0442"})]})}),Object(w.jsx)(O.t,{className:"eventInfoMap",style:{padding:"0px 10px"},children:Object(w.jsx)(Q.a,{bootstrapURLKeys:{key:"AIzaSyBY3XkvjucuJx55bzFZMTJQnYH5JnWK8SQ"},defaultCenter:{lat:i.coords_lat,lng:i.coords_lng},defaultZoom:17,children:Object(w.jsx)(Z,{event:i,lat:i.coords_lat,lng:i.coords_lng})})})]}),!i&&Object(w.jsx)(O.R,{})]})]})},le=["value","label"],je=["option"],be=[{value:1,label:"UNO"},{value:2,label:"\u041c\u043e\u043d\u043e\u043f\u043e\u043b\u0438\u044f"},{value:3,label:"\u041c\u0438\u0440 \u0422\u0430\u043d\u043a\u043e\u0432"},{value:4,label:"Warhammer 40.000"},{value:5,label:"\u0428\u0430\u0445\u043c\u0430\u0442\u044b"},{value:6,label:"\u041d\u0430\u0440\u0434\u044b"},{value:7,label:"\u0413\u043e\u043b\u043e\u0434\u043d\u044b\u0435 \u0438\u0433\u0440\u044b"},{value:8,label:"\u0416\u043e\u0441\u0442\u043a\u0430\u044f \u043d\u0430\u0441\u0442\u043e\u043b\u043a\u0430 \u0434\u043b\u044f \u0434\u0435\u0442\u0435\u0439"}],de=[{value:1,label:"Oriery"},{value:2,label:"TheEvaElfie"},{value:3,label:"Wylsacom"},{value:4,label:"\u041a\u0438\u0442\u044f \u0412\u0438\u0441\u043b\u044b\u0439"},{value:5,label:"KorbenDaIlas"},{value:6,label:"\u0421\u0442\u0430\u0441 \u0410\u0439 \u041a\u0430\u043a \u041f\u0440\u043e\u0441\u0442\u043e"},{value:7,label:"\u0414\u0436\u043e \u0411\u0430\u0439\u0434\u0435\u043d"},{value:8,label:"iPhone 14 Pro Max"}],ue=function(){var e=Object(s.useState)("light"),t=Object(a.a)(e,2),n=t[0],c=(t[1],Object(s.useState)("events")),r=Object(a.a)(c,2),i=r[0],o=r[1],l=Object(s.useState)("messages"),j=Object(a.a)(l,2),f=j[0],g=j[1],v=Object(s.useState)("events"),S=Object(a.a)(v,2),C=S[0],k=S[1],I=Object(s.useState)("map"),M=Object(a.a)(I,2),T=M[0],L=M[1],P=Object(s.useState)(null),D=Object(a.a)(P,2),H=D[0],z=D[1],B=Object(s.useState)(null),A=Object(a.a)(B,2),R=A[0],J=A[1],W=Object(s.useState)(!0),Y=Object(a.a)(W,2),V=Y[0],q=Y[1],$=F(null,"user"),K=Object(a.a)($,1)[0],Q=Object(s.useState)(K),Z=Object(a.a)(Q,2),ne=Z[0],ce=Z[1],ae=Object(s.useState)(null),se=Object(a.a)(ae,2),re=se[0],ie=se[1],ue=Object(s.useState)([]),Oe=Object(a.a)(ue,2),he=Oe[0],me=Oe[1],xe=Object(s.useState)([]),pe=Object(a.a)(xe,2),fe=pe[0],ge=pe[1],ve=Object(s.useState)([]),we=Object(a.a)(ve,2),Se=we[0],ye=we[1],Ce=Object(s.useState)([2,10]),ke=Object(a.a)(Ce,2),Ee=ke[0],Ne=ke[1],Ie=Object(O.gb)().viewWidth<=O.bb.MOBILE,Me=function(e){"map"==e.currentTarget.dataset.story&&L("map"),o(e.currentTarget.dataset.story)},Te=function(e){z(e),"map"==i?L("eventInfo"):k("eventInfo")},Le=function(){"map"==i?L("map"):k("events")},Pe=function(){De(he[he.length-2])},De=function(e){e=e||null;var t=he?Object(u.a)(he):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),ie(e),me(t)},He={value:fe,onChange:ge,options:be,placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b",creatable:!1,closeAfterSelect:!1},ze={value:Se,onChange:ye,options:de,placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u044b",creatable:!1,closeAfterSelect:!1},Be=Object(w.jsx)(O.D,{activeModal:re,onClose:Pe,children:Object(w.jsx)(O.B,{onClose:Pe,id:"filter",settlingHeight:100,header:Object(w.jsx)(O.C,{before:Ie&&Object(w.jsx)(O.I,{onClick:Pe}),after:Object(w.jsx)(O.K,{onClick:Pe}),children:"\u0424\u0438\u043b\u044c\u0442\u0440\u044b"}),children:Object(w.jsxs)(O.q,{children:[Object(w.jsx)(O.p,{top:"\u0418\u0433\u0440\u044b",children:Object(w.jsx)(te.a,Object(d.a)({},He))}),Object(w.jsx)(O.p,{top:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0442\u043e\u0440\u044b",children:Object(w.jsx)(te.a,Object(d.a)(Object(d.a)({},ze),{},{showSelected:!1,renderChip:function(e){var t=e.value,n=e.label,c=Object(b.a)(e,le);return Object(w.jsx)(O.i,Object(d.a)(Object(d.a)({value:t},c),{},{before:Object(w.jsx)(O.x,{size:20,gradientColor:Object(O.fb)(t)}),children:n}))},renderOption:function(e){var t=e.option,n=Object(b.a)(e,je);return Object(w.jsx)(O.l,Object(d.a)({before:Object(w.jsx)(O.x,{size:20,gradientColor:Object(O.fb)(t.value)})},n))}}))}),Object(w.jsx)(O.p,{className:"rangeSlider",top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432",bottom:"".concat(Ee[0]," - ").concat(Ee[1]),children:Object(w.jsx)(O.L,{min:2,max:10,defaultValue:Ee,step:1,onChange:function(e){return Ne(e)}})}),Object(w.jsx)(O.p,{top:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",children:Object(w.jsx)(O.m,{min:{day:1,month:1,year:2022},max:{day:31,month:12,year:2023},dayPlaceholder:"\u0414\u0414",monthPlaceholder:"MM",yearPlaceholder:"\u0413\u0413"})})]})})});return Object(w.jsx)(O.j,{appearance:n,webviewType:"internal",children:Object(w.jsx)(O.a,{hasMouse:!0,children:Object(w.jsx)(O.b,{children:Object(w.jsx)(O.T,{modal:Be,children:Object(w.jsx)(O.S,{animate:!0,spaced:!1,width:"100%",maxWidth:"100%",children:Object(w.jsxs)(O.n,{activeStory:i,tabbar:V&&Object(w.jsxs)(O.U,{children:[Object(w.jsx)(O.V,{onClick:Me,selected:"events"===i,"data-story":"events",text:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",children:Object(w.jsx)(h.a,{})}),Object(w.jsx)(O.V,{onClick:Me,selected:"map"===i,"data-story":"map",text:"\u041a\u0430\u0440\u0442\u0430",children:Object(w.jsx)(m.a,{})}),Object(w.jsx)(O.V,{onClick:Me,selected:"messages"===i,"data-story":"messages",text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",children:Object(w.jsx)(x.a,{})}),Object(w.jsx)(O.V,{onClick:Me,selected:"profile"===i,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(w.jsx)(p.a,{})})]}),children:[Object(w.jsxs)(O.ab,{id:"events",activePanel:C,children:[Object(w.jsx)(O.E,{id:"events",children:Object(w.jsx)(y,{onOpenModal:ie,onOpenEvent:Te})}),Object(w.jsx)(O.E,{id:"eventInfo",children:Object(w.jsx)(oe,{onClose:Le,event:H})})]}),Object(w.jsxs)(O.ab,{id:"map",activePanel:T,children:[Object(w.jsx)(O.E,{id:"map",children:Object(w.jsx)(ee,{onOpenEvent:Te})}),Object(w.jsx)(O.E,{id:"eventInfo",children:Object(w.jsx)(oe,{onClose:Le,event:H})})]}),Object(w.jsxs)(O.ab,{id:"messages",activePanel:f,children:[Object(w.jsx)(O.E,{id:"messages",children:Object(w.jsx)(E,{children:Object(w.jsx)(N,{onChatOpen:function(e){J(e),g("chat"),q(!1)}})})}),Object(w.jsx)(O.E,{id:"chat",className:"chatPanel",children:Object(w.jsx)(_,{chat:R,children:Object(w.jsx)(X,{onClose:function(){g("messages"),q(!0)},onOpenChatMembersList:function(e){g("chatMembers")}})})}),Object(w.jsx)(O.E,{id:"chatMembers",children:Object(w.jsx)(G,{onOpenProfile:function(e){ce(e),o("profile")},chat:R,onClose:function(){g("chat")}})})]}),Object(w.jsx)(O.ab,{id:"profile",activePanel:"profile",children:Object(w.jsx)(O.E,{id:"profile",children:Object(w.jsx)(U,{hasBack:!V,onClose:function(){ce(K),o("messages")},user:ne})})})]})})})})})})},Oe=n(64),he=n(69),me=n(70),xe=n(49),pe=n(89),fe=n(87),ge=n(215),ve=function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(e){var c;return Object(he.a)(this,n),(c=t.call(this,e)).state={nickname:"",password:"",popout:null,snackbar:null},c.onChange=c.onChange.bind(Object(xe.a)(c)),c.onRemove=c.onRemove.bind(Object(xe.a)(c)),c.onSignIn=c.onSignIn.bind(Object(xe.a)(c)),c}return Object(me.a)(n,[{key:"onChange",value:function(e){var t=e.currentTarget,n=t.name,c=t.value;this.setState(Object(Oe.a)({},n,c))}},{key:"onRemove",value:function(e){this.setState({showPatronym:!1})}},{key:"onSignIn",value:function(){var e=this;this.setState({popout:Object(w.jsx)(O.M,{state:"loading"})}),B.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users?$filter=username%20eq%20%27".concat(this.state.nickname,"%27")).then((function(t){t.data.value.length>0?(e.setState({popout:Object(w.jsx)(O.M,{state:"done"})}),localStorage.setItem("user",JSON.stringify(t.data.value[0].ID)),setTimeout((function(){return e.props.setLoged(!0)}),1500)):(e.setState({popout:Object(w.jsx)(O.M,{state:"error"})}),setTimeout((function(){return e.setState({popout:null,snackbar:Object(w.jsx)(O.Q,{onClose:function(){return e.setState({snackbar:null})},layout:"vertical",before:Object(w.jsx)(O.c,{size:24,style:{background:"var(--orange)"},children:Object(w.jsx)(ge.a,{fill:"#fff",width:14,height:14})}),action:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onActionClick:function(){return e.props.onSignUp(!0)},children:"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})})}),1e3))})).catch((function(){e.setState({popout:Object(w.jsx)(O.M,{state:"error"})}),setTimeout((function(){return e.setState({popout:null})}),1500)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.nickname,c=t.password;return Object(w.jsx)(O.j,{webviewType:O.cb.INTERNAL,children:Object(w.jsx)(O.a,{children:Object(w.jsx)(O.b,{children:Object(w.jsx)(O.T,{header:Object(w.jsx)(O.F,{separator:!1}),style:{justifyContent:"center"},popout:this.state.popout,children:Object(w.jsx)(O.ab,{activePanel:"new-user",children:Object(w.jsxs)(O.E,{id:"new-user",children:[Object(w.jsx)(O.F,{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(w.jsxs)(O.t,{children:[Object(w.jsxs)(O.q,{children:[Object(w.jsx)(O.p,{top:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",children:Object(w.jsx)(O.y,{type:"nickname",name:"nickname",value:n,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"})}),Object(w.jsx)(O.p,{top:"\u041f\u0430\u0440\u043e\u043b\u044c",children:Object(w.jsx)(O.y,{type:"password",name:"password",value:c,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(w.jsx)(O.p,{children:Object(w.jsx)(O.d,{onClick:this.onSignIn,size:"l",stretched:!0,disabled:!n||!c,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(w.jsx)(O.O,{}),Object(w.jsxs)(O.p,{children:[Object(w.jsx)(O.u,{style:{justifyContent:"center"},mode:"secondary",children:"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"}),Object(w.jsx)(O.d,{size:"l",stretched:!0,onClick:function(){return e.props.onSignUp(!0)},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]}),this.state.snackbar]})]})})})})})})}}]),n}(r.a.Component),we=(n(213),function(e){Object(pe.a)(n,e);var t=Object(fe.a)(n);function n(e){var c;return Object(he.a)(this,n),(c=t.call(this,e)).state={email:"",password1:"",password2:"",bio:"",date:{day:1,month:1,year:2002},sex:0,phoneNumber:"",nickname:"",popout:null},c.onChange=c.onChange.bind(Object(xe.a)(c)),c.onSignUp=c.onSignUp.bind(Object(xe.a)(c)),c}return Object(me.a)(n,[{key:"onChange",value:function(e){var t=e.currentTarget,n=t.name,c=t.value;this.setState(Object(Oe.a)({},n,c))}},{key:"onSignUp",value:function(){var e=this;this.setState({popout:Object(w.jsx)(O.M,{state:"loading"})}),B.a.post("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users",{username:this.state.nickname,email:this.state.email,phoneNumber:this.state.phoneNumber,bio:this.state.bio,dateOfBirth:new Date(this.state.date.year,this.state.date.month-1,this.state.date.day,3,0,0).toISOString().substring(0,10)}).then((function(t){e.setState({popout:Object(w.jsx)(O.M,{state:"done"})}),localStorage.setItem("user",JSON.stringify(t.data.ID)),setTimeout((function(){e.props.setLoged(!0),e.props.setWillSignUp(!1)}),1500)})).catch((function(t){console.log(t),e.setState({popout:Object(w.jsx)(O.M,{state:"error"})}),setTimeout((function(){return e.setState({popout:null})}),1500)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,c=t.password1,a=t.password2,s=t.nickname;return Object(w.jsx)(O.j,{webviewType:O.cb.INTERNAL,children:Object(w.jsx)(O.a,{hasMouse:!0,children:Object(w.jsx)(O.b,{children:Object(w.jsx)(O.T,{header:Object(w.jsx)(O.F,{separator:!1}),style:{justifyContent:"center"},popout:this.state.popout,children:Object(w.jsx)(O.ab,{activePanel:"new-user",children:Object(w.jsxs)(O.E,{id:"new-user",children:[Object(w.jsx)(O.F,{className:"shadowPanelHeader",separator:!1,before:Object(w.jsx)(O.G,{onClick:this.props.onClose}),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(w.jsx)(O.t,{children:Object(w.jsxs)(O.q,{children:[Object(w.jsx)(O.p,{top:"E-mail",children:Object(w.jsx)(O.y,{type:"email",name:"email",value:n,onChange:this.onChange})}),Object(w.jsx)(O.r,{children:Object(w.jsx)(O.p,{top:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",children:Object(w.jsx)(O.y,{name:"nickname",value:this.state.nickname,onChange:this.onChange})})}),Object(w.jsx)(O.p,{top:"\u041f\u0430\u0440\u043e\u043b\u044c",children:Object(w.jsx)(O.y,{type:"password",name:"password1",value:c,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(w.jsx)(O.p,{status:""!=c&&""!=a?c==a?"valid":"error":"default",bottom:""!=c&&""!=a?c==a?"\u041f\u0430\u0440\u043e\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",children:Object(w.jsx)(O.y,{type:"password",name:"password2",value:a,onChange:this.onChange,placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(w.jsx)(O.r,{children:Object(w.jsx)(O.p,{top:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",children:Object(w.jsx)(O.y,{value:this.state.phoneNumber,type:"phone",placeholder:"+375290000000",name:"phoneNumber",onChange:this.onChange})})}),Object(w.jsx)(O.p,{top:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",children:Object(w.jsx)(O.m,{min:{day:1,month:1,year:1901},max:{day:31,month:12,year:2022},dayPlaceholder:"\u0414\u0414",monthPlaceholder:"MM",yearPlaceholder:"\u0413\u0413",defaultValue:this.state.date,onDateChange:function(t){return e.setState({date:t})}})}),Object(w.jsx)(O.p,{top:"\u041f\u043e\u043b",children:Object(w.jsx)(O.N,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b",defaultValue:0,name:"sex",onChange:this.onChange,options:[{value:1,label:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{value:2,label:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"},{value:3,label:"\u0414\u0440\u0443\u0433\u043e\u0439"}]})}),Object(w.jsx)(O.p,{top:"\u041e \u0441\u0435\u0431\u0435",children:Object(w.jsx)(O.X,{name:"bio",onChange:this.onChange,value:this.state.bio})}),Object(w.jsx)(O.p,{children:Object(w.jsx)(O.d,{size:"l",stretched:!0,onClick:this.onSignUp,disabled:""==c||""==a||c!=a||""==s,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})]})})})})})})}}]),n}(r.a.Component));j.a.send("VKWebAppInit");var Se=function(){var e=Object(s.useState)(JSON.parse(localStorage.getItem("user"))),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(s.useState)(!1),i=Object(a.a)(r,2),o=i[0],l=i[1];return Object(w.jsxs)(w.Fragment,{children:[n&&!o&&Object(w.jsx)(ue,{}),!n&&!o&&Object(w.jsx)(ve,{setLoged:c,onSignUp:l}),!n&&o&&Object(w.jsx)(we,{onClose:function(){return l(!1)},setLoged:c,setWillSignUp:l})]})};o.a.render(Object(w.jsx)(Se,{}),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.f92ce7da.chunk.js.map