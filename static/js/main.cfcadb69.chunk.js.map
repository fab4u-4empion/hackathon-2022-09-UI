{"version":3,"sources":["panels/events.js","context/chatListContext.js","panels/messages.js","hooks/useShortText.js","panels/profile.js","messageComponents/message.js","messageComponents/messageList.js","panels/chat.js","App.js","index.js"],"names":["Events","style","height","icon","width","axios","require","Context","createContext","ChatListContextProvider","children","useState","chats","setChats","currentPage","setCurrentPage","setTotalCount","limit","fetching","setFetching","endOfPage","setEndOfPage","useEffect","get","then","response","data","filter","e","findIndex","c","id","prev","headers","finally","window","addEventListener","scrollHandler","removeEventListener","length","target","documentElement","scrollHeight","scrollTop","innerHeight","Provider","value","Messages","onChatOpen","useContext","className","separator","map","before","gradientColor","calcInitialsAvatarColor","title","substring","onClick","subtitle","str","indicator","mode","Profile","display","padding","gap","flexFlow","alignItems","size","src","activePanel","header","showArrows","getScrollToLeft","i","getScrollToRight","description","Message","self","text","caption","hasAvatar","avatar","messages","firstName","lastName","time","MessageList","isPublic","h2ref","useRef","setTimeout","current","scrollIntoView","behavior","m","index","ref","Chat","chatID","onClose","writeBarText","setWriteBarText","bottomPadding","setBottomPadding","fixedLayoutInnerElRef","Date","now","status","vertical","paddingBottom","wide","onChange","onHeightChange","el","offsetHeight","updateBottomPadding","placeholder","after","disabled","App","scheme","React","activeStory","setActiveStory","messagesActivePanel","setMessagesActivePanel","setChatID","hasTabbar","setHasTabbar","onStoryChange","currentTarget","dataset","story","justifyContent","animate","spaced","maxWidth","tabbar","selected","chat_id","bridge","send","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cfcadb69.chunk.js","sourcesContent":["import { Icon56NewsfeedOutline } from \"@vkontakte/icons\"\r\nimport { Group, PanelHeader, PanelHeaderBack, Placeholder } from \"@vkontakte/vkui\"\r\n\r\nexport const Events = () => {\r\n    return (\r\n        <>\r\n            <PanelHeader>События</PanelHeader>\r\n            <Group style={{ height: \"1000px\" }}>\r\n                <Placeholder\r\n                    icon={<Icon56NewsfeedOutline width={56} height={56} />}\r\n                />\r\n            </Group>\r\n        </>\r\n    )\r\n}\r\n","import { createContext, useContext, useEffect, useState } from \"react\";\r\nconst axios = require('axios');\r\n\r\nconst Context = createContext()\r\n\r\nexport const useChatListContextProvider = () => {\r\n    return useContext(Context)\r\n}\r\n\r\nexport const ChatListContextProvider = ({children}) => {\r\n\r\n    const [chats, setChats] = useState([])\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [totalCount, setTotalCount] = useState(0)\r\n    const [limit] = useState(15)\r\n    const [fetching, setFetching] = useState(true)\r\n    const [endOfPage, setEndOfPage] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (fetching) {\r\n            axios.get(`https://jsonplaceholder.typicode.com/posts?_limit=${limit}&_page=${currentPage}`)\r\n                .then(response => {\r\n                    setChats([...chats, ...response.data.filter(e => chats.findIndex(c => c.id == e.id) < 0)])\r\n                    setCurrentPage(prev => prev + 1)\r\n                    setTotalCount(response.headers[\"x-total-count\"])\r\n                })\r\n                .finally(() => {\r\n                    setEndOfPage(false)\r\n                    setFetching(false)\r\n                })\r\n        }\r\n    }, [fetching])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"scroll\", scrollHandler)\r\n        return function () {\r\n            window.removeEventListener(\"scroll\", scrollHandler)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (endOfPage && chats.length < 100) {\r\n            setFetching(true)\r\n        }\r\n    }, [endOfPage])\r\n\r\n    const scrollHandler = (e) => {\r\n        if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\r\n            setEndOfPage(true)\r\n        }\r\n    }\r\n\r\n    const newMessageHandler = (message) => {\r\n        const index = chats.findIndex(e => e.id == message.id)\r\n        if (index > -1) {\r\n            const temp = [...chats]\r\n            temp.splice(index, 1)\r\n            setChats([message, ...temp])\r\n        } else {\r\n            setChats([message, ...chats])\r\n        };\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={{\r\n            chats,\r\n            fetching\r\n        }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}","import { calcInitialsAvatarColor, Counter, Group, InitialsAvatar, List, PanelHeader, RichCell, SimpleCell, Spinner, Text, Title } from \"@vkontakte/vkui\"\r\nimport { useEffect } from \"react\"\r\nimport { useChatListContextProvider } from \"../context/chatListContext\"\r\nimport { useShortText } from \"../hooks/useShortText\"\r\n\r\nexport const Messages = ({onChatOpen}) => {\r\n\r\n    const { chats, fetching } = useChatListContextProvider()\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader className=\"shadowPanelHeader\" separator={false}>Сообщения</PanelHeader>\r\n            <Group>\r\n                {chats && <List>\r\n                        {\r\n                            chats.map(e => {\r\n                                return (\r\n                                    <SimpleCell\r\n                                        before={\r\n                                            <InitialsAvatar gradientColor={calcInitialsAvatarColor(e.id)}>\r\n                                                {e.title.substring(0, 2)}\r\n                                            </InitialsAvatar>}\r\n                                        key={e.id}\r\n                                        onClick={() => onChatOpen(e.id)}\r\n                                        subtitle={\r\n                                            <>{useShortText(\"Алексей: стикер cnbrth cnbrth cnbrth cnbrt\", 25)} &#183; 2h</>\r\n                                        }\r\n                                        indicator={<Counter mode=\"primary\">10</Counter>}\r\n                                    >\r\n                                        {e.title.substring(0, 10)}\r\n                                    </SimpleCell>\r\n                                )\r\n                            })\r\n                        }\r\n                        {fetching && <Spinner/>}\r\n                    </List>\r\n                }\r\n            </Group>\r\n        </>\r\n    )\r\n}","export const useShortText = (str, length) => {\r\n    return str.length > length ? str.substring(0, length) + \"...\" : str\r\n}","import {Icon28UserCircleOutline} from \"@vkontakte/icons\"\r\nimport {Group, PanelHeader, Root, View, Panel, CellButton, SimpleCell} from \"@vkontakte/vkui\"\r\nimport {useState} from \"react\";\r\nimport {Header, Avatar, Title, HorizontalScroll, Cell, List, HorizontalCell} from \"@vkontakte/vkui\";\r\n\r\n\r\n// const [activeView, setActiveView] = useState(\"view1\")\r\n\r\nexport const Profile = () => {\r\n    let recentFriends;\r\n    return (\r\n        // <Container style={styles.container}>\r\n        //     <PanelHeader>Профиль</PanelHeader>\r\n        //     <Content contentContainerStyle={styles.content}>\r\n        //         <Group style={{ height: \"1000px\" }}>\r\n        //             {/* <Placeholder\r\n        //             icon={<Icon28UserCircleOutline width={56} height={56} />}\r\n        //         ></Placeholder> */}\r\n        //             <SimpleCell before={<Avatar src={\"ЁЁD\"} />}>\r\n        //                 Олег Илларианов\r\n        //             </SimpleCell>\r\n        //         </Group>\r\n        //     </Content>\r\n        // </Container>\r\n        <Group>\r\n            <Panel id=\"panelInfo\">\r\n                <PanelHeader>Профиль</PanelHeader>\r\n                <Group>\r\n                    <Header mode=\"secondary\">Был в сети 21.12.2012</Header>\r\n                    <div\r\n                        style={{display: \"flex\", padding: 12, gap: 8, flexFlow: \"column\", alignItems: \"center\"}}\r\n                    >\r\n                        <Avatar size={280}\r\n                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                        <SimpleCell\r\n                            subtitle=\"О себе: Люблю играть в танки\"\r\n                        >\r\n                            Ваня Сакун\r\n                        </SimpleCell>\r\n                    </div>\r\n                </Group>\r\n                {/*<div style={{height: 600}}/>*/}\r\n            </Panel>\r\n            <Panel id=\"panelFriends\">\r\n                <View activePanel=\"horizontal\">\r\n                    <Panel id=\"horizontal\">\r\n                        <Group header={<Header mode=\"secondary\">Друзья</Header>}>\r\n                            <HorizontalScroll\r\n                                showArrows\r\n                                getScrollToLeft={(i) => i - 120}\r\n                                getScrollToRight={(i) => i + 120}\r\n                            >\r\n                                <div style={{display: \"flex\"}}>\r\n                                    <HorizontalCell key={1} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                    <HorizontalCell key={2} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                    <HorizontalCell key={3} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                    <HorizontalCell key={4} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                    <HorizontalCell key={5} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                    <HorizontalCell key={6} header={\"ABOBA\"}>\r\n                                        <Avatar size={56}\r\n                                                src={\"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\"}/>\r\n                                    </HorizontalCell>\r\n                                </div>\r\n                            </HorizontalScroll>\r\n                        </Group>\r\n                    </Panel>\r\n                </View>\r\n            </Panel>\r\n            <Panel id=\"panelGames\">\r\n                <Group header={<Header mode=\"secondary\">Любимые игры</Header>}>\r\n                    <List>\r\n                        <Cell before={<Avatar src={\"https://s2-goods.ozstatic.by/2000/42/893/10/10893042_0.jpg\"}/>}\r\n                              description=\"Carcassonne\">\r\n                            Каркассон\r\n                        </Cell>\r\n                        <Cell before={<Avatar\r\n                            src={\"https://avatars.mds.yandex.net/get-mpic/6382710/img_id8546741754982085445.jpeg/orig\"}/>}\r\n                              description=\"Monopoly\">\r\n                            Монополия\r\n                        </Cell>\r\n                        <Cell before={<Avatar\r\n                            src={\"https://igromaster.by/upload/iblock/972/972ee18fcf89183f221bab04bcff0668.jpg\"}/>}\r\n                              description=\"Uno\">\r\n                            У́но\r\n                        </Cell>\r\n                    </List>\r\n                </Group>\r\n            </Panel>\r\n        </Group>\r\n    )\r\n}","import { Avatar, calcInitialsAvatarColor, InitialsAvatar } from \"@vkontakte/vkui\"\r\n\r\nexport const Message = ({\r\n    self = false, \r\n    text,\r\n    caption = \"\",\r\n    hasAvatar = false,\r\n    avatar,\r\n    title,\r\n    id\r\n\r\n}) => {\r\n    return (\r\n        <div className={`messageBox ${self ? \"self\" : \"\"}`}>\r\n            {hasAvatar && avatar && <Avatar size={25}/>}\r\n            {hasAvatar && !avatar && \r\n                <InitialsAvatar size={25} gradientColor={calcInitialsAvatarColor(id)}>\r\n                    {title.substring(0, 2)}\r\n                </InitialsAvatar>\r\n            }\r\n            <div className={`messageTextBox ${self ? \"self\" : \"\"}`}>\r\n                {!self && <div className=\"messageTitle\">{title}</div>}\r\n                <div>{text}</div>\r\n                {caption && <div className=\"messageCaption\">{caption}</div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { useEffect, useRef } from \"react\"\r\nimport { Message } from \"./message\"\r\n\r\nconst userId = 1\r\n\r\nconst messages = [\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Egor\",\r\n        lastName: \"Strupa\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\"\r\n    },\r\n    {\r\n        id: 15,\r\n        text: \"wefewfewfewf fjnklewiof fwfjio\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"lon long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Egor\",\r\n        lastName: \"Strupa\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\"\r\n    },\r\n    {\r\n        id: 15,\r\n        text: \"wefewfewfewf fjnklewiof fwfjio\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"lon long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Egor\",\r\n        lastName: \"Strupa\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\"\r\n    },\r\n    {\r\n        id: 15,\r\n        text: \"wefewfewfewf fjnklewiof fwfjio\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"lon long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Egor\",\r\n        lastName: \"Strupa\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n        avatar: \"t\"\r\n    },\r\n    {\r\n        id: 100,\r\n        text: \"text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Shestakov\",\r\n        time: \"21:05\"\r\n    },\r\n    {\r\n        id: 15,\r\n        text: \"wefewfewfewf fjnklewiof fwfjio\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    },\r\n    {\r\n        id: 1,\r\n        text: \"lon long long text\",\r\n        firstName: \"Ivan\",\r\n        lastName: \"Gavrilovich\",\r\n        time: \"21:05\",\r\n    }\r\n]\r\n\r\nexport const MessageList = ({ isPublic = false}) => {\r\n    const h2ref = useRef(null);\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => h2ref.current.scrollIntoView({ behavior: 'smooth' }), 320)\r\n    }, []);\r\n\r\n    return (\r\n        <>\r\n            <div className=\"messageList\">\r\n                {messages.map(((m, index) => {\r\n                    return (\r\n                        <Message\r\n                            key={index}\r\n                            text={m.text}\r\n                            caption={m.time}\r\n                            hasAvatar={m.id != userId && isPublic}\r\n                            self={m.id == userId}\r\n                            title={isPublic && (m.firstName + \" \" + m.lastName)}\r\n                            avatar={m.avatar}\r\n                            id={m.id}\r\n                        />\r\n                    )\r\n                }))}\r\n            </div>\r\n            <div ref={h2ref}></div>\r\n        </>\r\n    )\r\n}","import { calcInitialsAvatarColor, Card, FixedLayout, Group, InitialsAvatar, PanelHeader, PanelHeaderBack, PanelHeaderContent, Separator, WriteBar, WriteBarIcon } from \"@vkontakte/vkui\"\r\nimport { Fragment, useEffect, useRef, useState } from \"react\";\r\nimport { MessageList } from \"../messageComponents/messageList\";\r\n\r\nexport const Chat = ({\r\n    chatID,\r\n    onClose\r\n}) => {\r\n    const [writeBarText, setWriteBarText] = useState(\"\")\r\n    const [bottomPadding, setBottomPadding] = useState(0);\r\n\r\n    const fixedLayoutInnerElRef = useRef();\r\n\r\n    const updateBottomPadding = () => {\r\n        const el = fixedLayoutInnerElRef.current;\r\n        if (el) {\r\n            const height = el.offsetHeight;\r\n            if (height !== bottomPadding) {\r\n                setBottomPadding(height);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader className=\"shadowPanelHeader\" separator={false} before={<PanelHeaderBack onClick={() => onClose()}/>}>\r\n                <PanelHeaderContent\r\n                    before={\r\n                        <InitialsAvatar size={36} gradientColor={calcInitialsAvatarColor(Date.now())}>\r\n                            Ch\r\n                        </InitialsAvatar>\r\n                    }\r\n                    status=\"10 участников\"\r\n                >\r\n                    {chatID}\r\n                </PanelHeaderContent>\r\n            </PanelHeader>\r\n            <MessageList isPublic/>\r\n            <FixedLayout\r\n                vertical=\"bottom\"\r\n                style={{paddingBottom: 0}}\r\n            >\r\n                <div ref={fixedLayoutInnerElRef}>\r\n                    <Separator wide />\r\n                    <WriteBar\r\n                        value={writeBarText}\r\n                        onChange={(e) => setWriteBarText(e.target.value)}\r\n                        onHeightChange={() => updateBottomPadding()}\r\n                        placeholder=\"Сообщение\"\r\n                        after={\r\n                            <Fragment>\r\n                                <WriteBarIcon mode=\"send\" disabled={writeBarText.length === 0}/>\r\n                            </Fragment>\r\n                        }\r\n                    />\r\n                </div>\r\n            </FixedLayout>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { View, AdaptivityProvider, AppRoot, ConfigProvider, SplitLayout, SplitCol, PanelHeader, Epic, Tabbar, TabbarItem, Panel } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport './styles/index.css'\r\nimport { Icon28MessageOutline, Icon28NewsfeedOutline, Icon28UserCircleOutline } from '@vkontakte/icons';\r\nimport { Events } from './panels/events';\r\nimport { Messages } from './panels/messages';\r\nimport { Profile } from './panels/profile';\r\nimport { Chat } from './panels/chat';\r\nimport { ChatListContextProvider } from './context/chatListContext';\r\n\r\nconst App = () => {\r\n\tconst [scheme, setScheme] = useState('bright_light')\r\n\tconst [activeStory, setActiveStory] = React.useState(\"events\")\r\n\tconst [messagesActivePanel, setMessagesActivePanel] = useState(\"messages\")\r\n\tconst [chatID, setChatID] = useState(null)\r\n\tconst [hasTabbar, setHasTabbar] = useState(true)\r\n\tconst onStoryChange = (e) => setActiveStory(e.currentTarget.dataset.story)\r\n\r\n\tconst openChatHandler = (chat_id) => {\r\n\t\tsetChatID(chat_id)\r\n\t\tsetMessagesActivePanel(\"chat\")\r\n\t\tsetHasTabbar(false)\r\n\t}\r\n\r\n\tconst closeChatHanler = () => {\r\n\t\tsetMessagesActivePanel(\"messages\")\r\n\t\tsetHasTabbar(true)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ConfigProvider scheme={scheme}>\r\n\t\t\t<AdaptivityProvider>\r\n\t\t\t\t<AppRoot>\r\n\t\t\t\t\t<SplitLayout\r\n\t\t\t\t\t\theader={<PanelHeader separator={false} />}\r\n\t\t\t\t\t\tstyle={{ justifyContent: \"center\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SplitCol\r\n\t\t\t\t\t\t\tanimate={true}\r\n\t\t\t\t\t\t\tspaced={false}\r\n\t\t\t\t\t\t\twidth={\"100%\"}\r\n\t\t\t\t\t\t\tmaxWidth={\"100%\"}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Epic\r\n\t\t\t\t\t\t\t\tactiveStory={activeStory}\r\n\t\t\t\t\t\t\t\ttabbar={hasTabbar &&\r\n\t\t\t\t\t\t\t\t\t<Tabbar>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"events\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"events\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"События\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28NewsfeedOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"messages\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"messages\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Сообщения\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28MessageOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"profile\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"profile\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Профиль\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28UserCircleOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t</Tabbar>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<View id=\"events\" activePanel=\"events\">\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"events\">\r\n\t\t\t\t\t\t\t\t\t\t<Events />\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t<View id=\"messages\" activePanel={messagesActivePanel}>\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"messages\">\r\n\t\t\t\t\t\t\t\t\t\t<ChatListContextProvider>\r\n\t\t\t\t\t\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChatOpen={openChatHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</ChatListContextProvider>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"chat\" className=\"chatPanel\">\r\n\t\t\t\t\t\t\t\t\t\t<Chat chatID={chatID} onClose={closeChatHanler}/>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t<View id=\"profile\" activePanel=\"profile\">\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"profile\">\r\n\t\t\t\t\t\t\t\t\t\t<Profile/>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t</Epic>\r\n\t\t\t\t\t\t</SplitCol>\r\n\t\t\t\t\t</SplitLayout>\r\n\t\t\t\t</AppRoot>\r\n\t\t\t</AdaptivityProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// if (process.env.NODE_ENV === \"development\") {\n//   import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n// }\n"],"sourceRoot":""}