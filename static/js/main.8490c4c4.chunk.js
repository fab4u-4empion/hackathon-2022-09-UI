(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{155:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var c,s=n(7),a=n(0),r=n.n(a),i=n(19),o=n.n(i),j=n(13),l=n.n(j),b=n(3),d=(n(32),n(170)),u=n(171),h=n(172),O=n(161),x=n(1),p=function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.w,{children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(x.jsx)(b.p,{style:{height:"1000px"},children:Object(x.jsx)(b.A,{icon:Object(x.jsx)(O.a,{width:56,height:56})})})]})},m=n(15),f=n(16),g=Object(a.createContext)(),v=function(e){var t=e.children,n=Object(a.useState)([]),c=Object(s.a)(n,2),r=c[0],i=c[1],o=Object(a.useState)(1),j=Object(s.a)(o,2),l=j[0],b=j[1],d=Object(a.useState)(0),u=Object(s.a)(d,2),h=u[0],O=u[1],p=Object(a.useState)(15),v=Object(s.a)(p,1)[0],w=Object(a.useState)(!0),S=Object(s.a)(w,2),C=S[0],y=S[1],k=Object(a.useState)(!1),N=Object(s.a)(k,2),E=N[0],T=N[1];Object(a.useEffect)((function(){C&&f.get("https://jsonplaceholder.typicode.com/posts?_limit=".concat(v,"&_page=").concat(l)).then((function(e){i([].concat(Object(m.a)(r),Object(m.a)(e.data.filter((function(e){return r.findIndex((function(t){return t.id==e.id}))<0}))))),b((function(e){return e+1})),O(e.headers["x-total-count"])})).finally((function(){T(!1),y(!1)}))}),[C]),Object(a.useEffect)((function(){return window.addEventListener("scroll",I),function(){window.removeEventListener("scroll",I)}}),[]),Object(a.useEffect)((function(){E&&r.length<h&&y(!0)}),[E]);var I=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&T(!0)};return Object(x.jsx)(g.Provider,{value:{chats:r,fetching:C},children:t})},w=function(e){var t=e.onChatOpen,n=Object(a.useContext)(g),c=n.chats,s=n.fetching;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.w,{className:"shadowPanelHeader",separator:!1,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(x.jsx)(b.p,{children:Object(x.jsxs)(b.t,{children:[c.map((function(e){return Object(x.jsx)(b.E,{before:Object(x.jsx)(b.r,{gradientColor:Object(b.T)(e.id),children:e.title.substring(0,2)}),onClick:function(){return t(e)},subtitle:Object(x.jsxs)(x.Fragment,{children:[(n="\u0410\u043b\u0435\u043a\u0441\u0435\u0439: \u0441\u0442\u0438\u043a\u0435\u0440 cnbrth cnbrth cnbrth cnbrt",c=25,n.length>c?n.substring(0,c)+"...":n)," \xb7 2h"]}),indicator:Object(x.jsx)(b.h,{mode:"primary",children:"10"}),children:e.title.substring(0,10)},e.id);var n,c})),s&&Object(x.jsx)(b.G,{})]})})]})},S=n(162),C=n(163),y=n(164),k=n(167),N=n(168),E=n(165),T=n(166),I=n(16),P=n.n(I),D=function(e,t){var n=Object(a.useState)((function(){var n=localStorage.getItem(t);return n?JSON.parse(n):e})),c=Object(s.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){localStorage.setItem(t,JSON.stringify(r))}),[r]),[r,i]},B=function(e){var t=e.user,n=e.hasBack,c=e.onClose,r=Object(a.useState)(null),i=Object(s.a)(r,2),o=i[0],j=i[1],l=D(null,"user"),d=Object(s.a)(l,1)[0];Object(a.useEffect)((function(){P.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users/".concat(t)).then((function(e){j(e.data)}))}),[]);var u;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.w,{className:"shadowPanelHeader",separator:!1,before:n&&Object(x.jsx)(b.x,{onClick:c}),after:o&&d==o.ID&&Object(x.jsx)(b.y,{onClick:function(){localStorage.removeItem("user"),location.reload()},children:Object(x.jsx)(S.a,{})}),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),!o&&Object(x.jsx)(b.p,{children:Object(x.jsx)(b.G,{})}),o&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)(b.p,{children:[Object(x.jsxs)(b.o,{mode:"tint",to:"top",className:"profileBIO",children:[Object(x.jsx)(b.r,{size:96,gradientColor:Object(b.T)(Number(o.phoneNumber%10)),children:o.username.substring(0,2)}),Object(x.jsx)(b.N,{level:"2",width:"2",className:"profileTitle",children:o.username}),Object(x.jsx)(b.L,{className:"profileSubTitle",children:o.bio}),d!=o.ID&&Object(x.jsxs)(b.e,{children:[Object(x.jsx)(b.d,{size:"m",sizeY:"compact",children:Object(x.jsx)(C.a,{})}),Object(x.jsx)(b.d,{size:"m",sizeY:"compact",before:Object(x.jsx)(y.a,{}),children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c"})]})]}),Object(x.jsx)(b.p,{header:Object(x.jsx)(b.q,{mode:"secondary",children:"\u0414\u0440\u0443\u0437\u044c\u044f"}),children:Object(x.jsx)(b.E,{className:"profileFriends",before:Object(x.jsx)(b.O,{size:"m",photos:["https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg","https://www.ixbt.com/img/n1/news/2018/7/4/341109.png","https://cdni.rt.com/russian/images/2022.09/article/63231abe02e8bd743524f678.png"]}),after:Object(x.jsx)(E.a,{width:30,height:30}),children:"1377 \u0434\u0440\u0443\u0437\u0435\u0439"})})]}),Object(x.jsxs)(b.p,{header:Object(x.jsx)(b.q,{mode:"secondary",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:[Object(x.jsx)(b.u,{before:Object(x.jsx)(T.a,{}),textLevel:"primary",children:o.phoneNumber}),Object(x.jsx)(b.u,{before:Object(x.jsx)(k.a,{}),textLevel:"primary",children:o.email}),Object(x.jsx)(b.u,{before:Object(x.jsx)(N.a,{}),textLevel:"primary",children:(u=o.dateOfBirth,new Date(u).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric"}))})]}),Object(x.jsx)(b.p,{header:Object(x.jsx)(b.q,{mode:"secondary",children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u0438\u0433\u0440\u044b"}),children:Object(x.jsxs)(b.t,{children:[Object(x.jsx)(b.f,{before:Object(x.jsx)(b.c,{src:"https://s2-goods.ozstatic.by/2000/42/893/10/10893042_0.jpg"}),description:"Carcassonne",children:"\u041a\u0430\u0440\u043a\u0430\u0441\u0441\u043e\u043d"}),Object(x.jsx)(b.f,{before:Object(x.jsx)(b.c,{src:"https://avatars.mds.yandex.net/get-mpic/6382710/img_id8546741754982085445.jpeg/orig"}),description:"Monopoly",children:"\u041c\u043e\u043d\u043e\u043f\u043e\u043b\u0438\u044f"}),Object(x.jsx)(b.f,{before:Object(x.jsx)(b.c,{src:"https://igromaster.by/upload/iblock/972/972ee18fcf89183f221bab04bcff0668.jpg"}),description:"Uno",children:"\u0423\u0301\u043d\u043e"})]})})]})]})},H=n(51),L=n(34),z=n.n(L),U=Object(a.createContext)(),M=function(){return Object(a.useContext)(U)},F=function(e){var t=e.children,n=e.chat,r=Object(a.useState)([]),i=Object(s.a)(r,2),o=i[0],j=i[1],l=Object(a.useState)([]),b=Object(s.a)(l,2),d=b[0],u=b[1],h=Object(a.useState)(!0),O=Object(s.a)(h,2),p=O[0],f=O[1],g=Object(a.useState)(1),v=Object(s.a)(g,2),w=v[0],S=v[1],C=Object(a.useState)(0),y=Object(s.a)(C,2),k=y[0],N=y[1],E=Object(a.useState)(30),T=Object(s.a)(E,1)[0],I=Object(a.useState)(!1),D=Object(s.a)(I,2),B=D[0],L=D[1],M=Object(a.useState)(!0),F=Object(s.a)(M,2),A=F[0],J=F[1],R=Object(a.useState)(2),_=Object(s.a)(R,2),q=_[0],W=_[1],K=Object(a.useState)(!1),V=Object(s.a)(K,2),X=V[0],Y=V[1];Object(a.useEffect)(Object(H.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users");case 2:t=e.sent,u(Object(m.a)(t.data.value)),setTimeout((function(){G()}),500);case 5:case"end":return e.stop()}}),e)}))),[]),Object(a.useEffect)((function(){return(c=new WebSocket("ws://192.168.160.194:8087/hello")).addEventListener("opne",$),function(){c.removeEventListener("opne",$),c.close()}}),[]),Object(a.useEffect)((function(){p&&d.length>0&&G()}),[p]),Object(a.useEffect)((function(){n.members=d}),[d]);var G=function(){P.a.get("https://jsonplaceholder.typicode.com/comments?_limit=".concat(T,"&_page=").concat(w)).then((function(e){j([].concat(Object(m.a)(e.data),Object(m.a)(o))),S((function(e){return e+1})),N(e.headers["x-total-count"])})).finally((function(){L(!1),f(!1),1==w&&window.scrollTo(window.scrollX,document.body.scrollHeight)}))};Object(a.useEffect)((function(){return window.addEventListener("scroll",Q),function(){window.removeEventListener("scroll",Q)}}),[]),Object(a.useEffect)((function(){B&&o.length<k&&f(!0)}),[B]);var Q=function(e){J(!1),e.target.documentElement.scrollTop<100&&L(!0),e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&J(!0)},$=function(e){Y(!0),console.log(e)};return Object(x.jsx)(U.Provider,{value:{messages:o,fetching:p,members:d,chat:n,needScroll:A,limit:T,currentPage:w,sendMessage:function(e){J(!0);var t={senderId:1,chatId:2,email:"test@test.test",body:e};c.send(JSON.stringify(t)),j([].concat(Object(m.a)(o),[t])),W((function(e){return e+1}))},endOfPage:B,newMessageCount:q,openSocket:X},children:t})},A=function(e){var t=e.text;return Object(x.jsxs)("div",{className:"textSeparator",children:[Object(x.jsx)("div",{className:"line"}),Object(x.jsx)("div",{className:"text",children:t})]})},J=function(e){var t=e.self,n=void 0!==t&&t,c=e.text,s=e.caption,a=void 0===s?"":s,r=e.hasAvatar,i=void 0!==r&&r,o=e.avatar,j=e.title,l=e.id;return Object(x.jsxs)("div",{className:"messageBox ".concat(n?"self":""),children:[i&&o&&Object(x.jsx)(b.c,{size:25}),i&&!o&&Object(x.jsx)(b.r,{size:25,gradientColor:Object(b.T)(l),children:j.substring(0,2)}),Object(x.jsxs)("div",{className:"messageTextBox ".concat(n?"self":""),children:[!n&&Object(x.jsx)("div",{className:"messageTitle",children:j}),Object(x.jsx)("div",{children:c}),a&&Object(x.jsx)("div",{className:"messageCaption",children:a})]})]})},R=function(e){var t=e.isPublic,n=void 0===t||t,c=Object(a.useState)(0),i=Object(s.a)(c,2),o=i[0],j=i[1],l=M(),d=l.messages,u=l.fetching,h=l.needScroll,O=l.newMessageCount,p=l.endOfPage,m=Object(a.useState)(window.innerHeight),f=Object(s.a)(m,2),g=f[0],v=f[1],w=Object(a.useState)(!1),S=Object(s.a)(w,2),C=S[0],y=S[1],k=Object(a.useRef)(null);Object(a.useLayoutEffect)((function(){p&&window.scrollTo(window.scrollX,document.body.scrollTop+document.documentElement.scrollHeight-o),h&&k.current.scrollIntoView({behavior:"smooth"})}),[d]),Object(a.useLayoutEffect)((function(){p&&j(document.documentElement.scrollHeight)}),[p]),Object(a.useEffect)((function(){C&&(g-window.innerHeight>0&&window.scrollTo(window.scrollX,window.scrollY+g-window.innerHeight),g-window.innerHeight<0&&document.documentElement.scrollHeight-(document.documentElement.scrollTop+window.innerHeight)>Math.abs(g-window.innerHeight)&&window.scrollTo(window.scrollX,window.scrollY+g-window.innerHeight),v(window.innerHeight),y(!1))}),[C]);var N=function(){y(!0)};return Object(a.useEffect)((function(){return window.addEventListener("resize",N),function(){return window.removeEventListener("resize",N)}}),[]),Object(x.jsxs)(x.Fragment,{children:[u&&Object(x.jsx)(b.G,{style:{marginTop:10}}),Object(x.jsx)("div",{className:"messageList",children:d.map((function(e,t,c){return Object(x.jsxs)(r.a.Fragment,{children:[c.length-t==O&&Object(x.jsx)(A,{text:"\u041d\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(x.jsx)(J,{text:e.body,caption:e.id,hasAvatar:e.id%2==1&&n,self:e.id%2==0,title:n&&e.email,avatar:e.avatar,id:e.id})]},t)}))}),Object(x.jsx)("div",{ref:k})]})},_=n(169),q=function(e){var t=e.onClose,n=e.onOpenChatMembersList,c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],o=r[1],j=Object(a.useState)(0),l=Object(s.a)(j,2),d=l[0],u=l[1],h=Object(a.useRef)(),O=M(),p=O.chat,m=O.sendMessage,f=O.openSocket,g=O.members;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.w,{className:"shadowPanelHeader",separator:!1,before:Object(x.jsx)(b.x,{onClick:t}),after:g.length>0&&Object(x.jsx)(b.y,{onClick:n,children:Object(x.jsx)(_.a,{})}),children:Object(x.jsx)(b.z,{before:Object(x.jsx)(b.r,{size:36,gradientColor:Object(b.T)(p.id),children:p.title.substring(0,2)}),status:"".concat(g.length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"),children:p.title.substring(0,10)})}),Object(x.jsx)(R,{}),Object(x.jsx)(b.k,{vertical:"bottom",style:{paddingBottom:0},children:Object(x.jsxs)("div",{ref:h,children:[Object(x.jsx)(b.D,{wide:!0}),Object(x.jsx)(b.R,{value:i,onChange:function(e){return o(e.target.value)},onHeightChange:function(){return function(){var e=h.current;if(e){var t=e.offsetHeight;t!==d&&u(t)}}()},placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",after:Object(x.jsx)(a.Fragment,{children:Object(x.jsx)(b.S,{mode:"send",disabled:0===i.length||!f,onClick:function(){return m(i),void o("")}})})})]})})]})},W=function(e){var t=e.onClose,n=e.chat,c=e.onOpenProfile;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.w,{className:"shadowPanelHeader",separator:!1,before:Object(x.jsx)(b.x,{onClick:t}),children:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"}),Object(x.jsxs)(b.p,{className:"d-f-center",children:[Object(x.jsx)(b.r,{size:100,gradientColor:Object(b.T)(n.id),children:n.title.substring(0,2)}),Object(x.jsx)(b.N,{children:n.title.substring(0,10)})]}),Object(x.jsx)(b.p,{children:Object(x.jsx)(b.t,{children:n.members.map((function(e){return Object(x.jsx)(b.E,{before:Object(x.jsx)(b.r,{size:48,gradientColor:Object(b.T)(Number(e.phoneNumber%10)),children:e.username.substring(0,2)}),subtitle:e.bio,onClick:function(){return c(e.ID)},children:e.username},e.ID)}))})})]})},K=function(){var e=Object(a.useState)("light"),t=Object(s.a)(e,2),n=t[0],c=(t[1],Object(a.useState)("events")),r=Object(s.a)(c,2),i=r[0],o=r[1],j=Object(a.useState)("messages"),l=Object(s.a)(j,2),O=l[0],m=l[1],f=Object(a.useState)(null),g=Object(s.a)(f,2),S=g[0],C=g[1],y=Object(a.useState)(!0),k=Object(s.a)(y,2),N=k[0],E=k[1],T=D(null,"user"),I=Object(s.a)(T,1)[0],P=Object(a.useState)(I),H=Object(s.a)(P,2),L=H[0],z=H[1],U=function(e){return o(e.currentTarget.dataset.story)};return Object(x.jsx)(b.g,{appearance:n,webviewType:"internal",children:Object(x.jsx)(b.a,{children:Object(x.jsx)(b.b,{children:Object(x.jsx)(b.I,{header:Object(x.jsx)(b.w,{separator:!1}),style:{justifyContent:"center"},children:Object(x.jsx)(b.H,{animate:!0,spaced:!1,width:"100%",maxWidth:"100%",children:Object(x.jsxs)(b.j,{activeStory:i,tabbar:N&&Object(x.jsxs)(b.J,{children:[Object(x.jsx)(b.K,{onClick:U,selected:"events"===i,"data-story":"events",text:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",children:Object(x.jsx)(d.a,{})}),Object(x.jsx)(b.K,{onClick:U,selected:"messages"===i,"data-story":"messages",text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",children:Object(x.jsx)(u.a,{})}),Object(x.jsx)(b.K,{onClick:U,selected:"profile"===i,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(x.jsx)(h.a,{})})]}),children:[Object(x.jsx)(b.P,{id:"events",activePanel:"events",children:Object(x.jsx)(b.v,{id:"events",children:Object(x.jsx)(p,{})})}),Object(x.jsxs)(b.P,{id:"messages",activePanel:O,children:[Object(x.jsx)(b.v,{id:"messages",children:Object(x.jsx)(v,{children:Object(x.jsx)(w,{onChatOpen:function(e){C(e),m("chat"),E(!1)}})})}),Object(x.jsx)(b.v,{id:"chat",className:"chatPanel",children:Object(x.jsx)(F,{chat:S,children:Object(x.jsx)(q,{onClose:function(){m("messages"),E(!0)},onOpenChatMembersList:function(e){m("chatMembers")}})})}),Object(x.jsx)(b.v,{id:"chatMembers",children:Object(x.jsx)(W,{onOpenProfile:function(e){z(e),o("profile")},chat:S,onClose:function(){m("chat")}})})]}),Object(x.jsx)(b.P,{id:"profile",activePanel:"profile",children:Object(x.jsx)(b.v,{id:"profile",children:Object(x.jsx)(B,{hasBack:!N,onClose:function(){z(I),o("messages")},user:L})})})]})})})})})})},V=n(24),X=n(25),Y=n(26),G=n(17),Q=n(28),$=n(27),Z=n(173),ee=function(e){Object(Q.a)(n,e);var t=Object($.a)(n);function n(e){var c;return Object(X.a)(this,n),(c=t.call(this,e)).state={nickname:"",password:"",popout:null,snackbar:null},c.onChange=c.onChange.bind(Object(G.a)(c)),c.onRemove=c.onRemove.bind(Object(G.a)(c)),c.onSignIn=c.onSignIn.bind(Object(G.a)(c)),c}return Object(Y.a)(n,[{key:"onChange",value:function(e){var t=e.currentTarget,n=t.name,c=t.value;this.setState(Object(V.a)({},n,c))}},{key:"onRemove",value:function(e){this.setState({showPatronym:!1})}},{key:"onSignIn",value:function(){var e=this;this.setState({popout:Object(x.jsx)(b.B,{state:"loading"})}),P.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users?$filter=username%20eq%20%27".concat(this.state.nickname,"%27")).then((function(t){t.data.value.length>0?(e.setState({popout:Object(x.jsx)(b.B,{state:"done"})}),localStorage.setItem("user",JSON.stringify(t.data.value[0].ID)),setTimeout((function(){return e.props.setLoged(!0)}),1500)):(e.setState({popout:Object(x.jsx)(b.B,{state:"error"})}),setTimeout((function(){return e.setState({popout:null,snackbar:Object(x.jsx)(b.F,{onClose:function(){return e.setState({snackbar:null})},layout:"vertical",before:Object(x.jsx)(b.c,{size:24,style:{background:"var(--orange)"},children:Object(x.jsx)(Z.a,{fill:"#fff",width:14,height:14})}),action:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",onActionClick:function(){return e.props.onSignUp(!0)},children:"\u0422\u0430\u043a\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"})})}),1e3))})).catch((function(){e.setState({popout:Object(x.jsx)(b.B,{state:"error"})}),setTimeout((function(){return e.setState({popout:null})}),1500)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.nickname,c=t.password;return Object(x.jsx)(b.g,{webviewType:b.Q.INTERNAL,children:Object(x.jsx)(b.a,{children:Object(x.jsx)(b.b,{children:Object(x.jsx)(b.I,{header:Object(x.jsx)(b.w,{separator:!1}),style:{justifyContent:"center"},popout:this.state.popout,children:Object(x.jsx)(b.P,{activePanel:"new-user",children:Object(x.jsxs)(b.v,{id:"new-user",children:[Object(x.jsx)(b.w,{children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"}),Object(x.jsxs)(b.p,{children:[Object(x.jsxs)(b.m,{children:[Object(x.jsx)(b.l,{top:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",children:Object(x.jsx)(b.s,{type:"nickname",name:"nickname",value:n,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0438\u043a\u043d\u0435\u0439\u043c"})}),Object(x.jsx)(b.l,{top:"\u041f\u0430\u0440\u043e\u043b\u044c",children:Object(x.jsx)(b.s,{type:"password",name:"password",value:c,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(x.jsx)(b.l,{children:Object(x.jsx)(b.d,{onClick:this.onSignIn,size:"l",stretched:!0,disabled:!n||!c,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})}),Object(x.jsx)(b.D,{}),Object(x.jsxs)(b.l,{children:[Object(x.jsx)(b.q,{style:{justifyContent:"center"},mode:"secondary",children:"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"}),Object(x.jsx)(b.d,{size:"l",stretched:!0,onClick:function(){return e.props.onSignUp(!0)},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]})]}),this.state.snackbar]})]})})})})})})}}]),n}(r.a.Component),te=(n(155),function(e){Object(Q.a)(n,e);var t=Object($.a)(n);function n(e){var c;return Object(X.a)(this,n),(c=t.call(this,e)).state={email:"",password1:"",password2:"",bio:"",date:{day:1,month:1,year:2002},sex:0,phoneNumber:"",nickname:"",popout:null},c.onChange=c.onChange.bind(Object(G.a)(c)),c.onSignUp=c.onSignUp.bind(Object(G.a)(c)),c}return Object(Y.a)(n,[{key:"onChange",value:function(e){var t=e.currentTarget,n=t.name,c=t.value;this.setState(Object(V.a)({},n,c))}},{key:"onSignUp",value:function(){var e=this;this.setState({popout:Object(x.jsx)(b.B,{state:"loading"})}),P.a.post("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users",{username:this.state.nickname,email:this.state.email,phoneNumber:this.state.phoneNumber,bio:this.state.bio,dateOfBirth:new Date(this.state.date.year,this.state.date.month-1,this.state.date.day,3,0,0).toISOString().substring(0,10)}).then((function(t){e.setState({popout:Object(x.jsx)(b.B,{state:"done"})}),localStorage.setItem("user",JSON.stringify(t.data.ID)),setTimeout((function(){e.props.setLoged(!0),e.props.setWillSignUp(!1)}),1500)})).catch((function(t){console.log(t),e.setState({popout:Object(x.jsx)(b.B,{state:"error"})}),setTimeout((function(){return e.setState({popout:null})}),1500)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,c=t.password1,s=t.password2,a=t.nickname;return Object(x.jsx)(b.g,{webviewType:b.Q.INTERNAL,children:Object(x.jsx)(b.a,{hasMouse:!0,children:Object(x.jsx)(b.b,{children:Object(x.jsx)(b.I,{header:Object(x.jsx)(b.w,{separator:!1}),style:{justifyContent:"center"},popout:this.state.popout,children:Object(x.jsx)(b.P,{activePanel:"new-user",children:Object(x.jsxs)(b.v,{id:"new-user",children:[Object(x.jsx)(b.w,{className:"shadowPanelHeader",separator:!1,before:Object(x.jsx)(b.x,{onClick:this.props.onClose}),children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(x.jsx)(b.p,{children:Object(x.jsxs)(b.m,{children:[Object(x.jsx)(b.l,{top:"E-mail",children:Object(x.jsx)(b.s,{type:"email",name:"email",value:n,onChange:this.onChange})}),Object(x.jsx)(b.n,{children:Object(x.jsx)(b.l,{top:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c",children:Object(x.jsx)(b.s,{name:"nickname",value:this.state.nickname,onChange:this.onChange})})}),Object(x.jsx)(b.l,{top:"\u041f\u0430\u0440\u043e\u043b\u044c",children:Object(x.jsx)(b.s,{type:"password",name:"password1",value:c,onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(x.jsx)(b.l,{status:""!=c&&""!=s?c==s?"valid":"error":"default",bottom:""!=c&&""!=s?c==s?"\u041f\u0430\u0440\u043e\u043b\u0438 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442!":"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":"\u041f\u0430\u0440\u043e\u043b\u044c \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b \u0438 \u0446\u0438\u0444\u0440\u044b",children:Object(x.jsx)(b.s,{type:"password",name:"password2",value:s,onChange:this.onChange,placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})}),Object(x.jsx)(b.n,{children:Object(x.jsx)(b.l,{top:"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",children:Object(x.jsx)(b.s,{value:this.state.phoneNumber,type:"phone",placeholder:"+375290000000",name:"phoneNumber",onChange:this.onChange})})}),Object(x.jsx)(b.l,{top:"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f",children:Object(x.jsx)(b.i,{min:{day:1,month:1,year:1901},max:{day:31,month:12,year:2022},dayPlaceholder:"\u0414\u0414",monthPlaceholder:"MM",yearPlaceholder:"\u0413\u0413",defaultValue:this.state.date,onDateChange:function(t){return e.setState({date:t})}})}),Object(x.jsx)(b.l,{top:"\u041f\u043e\u043b",children:Object(x.jsx)(b.C,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u043b",defaultValue:0,name:"sex",onChange:this.onChange,options:[{value:1,label:"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"},{value:2,label:"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"},{value:3,label:"\u0414\u0440\u0443\u0433\u043e\u0439"}]})}),Object(x.jsx)(b.l,{top:"\u041e \u0441\u0435\u0431\u0435",children:Object(x.jsx)(b.M,{name:"bio",onChange:this.onChange,value:this.state.bio})}),Object(x.jsx)(b.l,{children:Object(x.jsx)(b.d,{size:"l",stretched:!0,onClick:this.onSignUp,disabled:""==c||""==s||c!=s||""==a,children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})]})})})})})})}}]),n}(r.a.Component));l.a.send("VKWebAppInit");var ne=function(){var e=Object(a.useState)(JSON.parse(localStorage.getItem("user"))),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(s.a)(r,2),o=i[0],j=i[1];return Object(x.jsxs)(x.Fragment,{children:[n&&!o&&Object(x.jsx)(K,{}),!n&&!o&&Object(x.jsx)(ee,{setLoged:c,onSignUp:j}),!n&&o&&Object(x.jsx)(te,{onClose:function(){return j(!1)},setLoged:c,setWillSignUp:j})]})};o.a.render(Object(x.jsx)(ne,{}),document.getElementById("root"))}},[[156,1,2]]]);
//# sourceMappingURL=main.8490c4c4.chunk.js.map