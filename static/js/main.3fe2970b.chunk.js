(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{136:function(e,t,c){},162:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),r=c(20),i=c.n(r),a=c(11),o=c.n(a),j=c(7),l=c(4),b=(c(135),c(136),c(171)),d=c(172),O=c(173),u=c(163),h=c(1),f=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.r,{children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(h.jsx)(l.l,{style:{height:"1000px"},children:Object(h.jsx)(l.v,{icon:Object(h.jsx)(u.a,{width:56,height:56})})})]})},x=c(13),m=c(17),g=Object(n.createContext)(),p=function(e){var t=e.children,c=Object(n.useState)([]),s=Object(j.a)(c,2),r=s[0],i=s[1],a=Object(n.useState)(1),o=Object(j.a)(a,2),l=o[0],b=o[1],d=Object(n.useState)(0),O=Object(j.a)(d,2),u=O[0],f=O[1],p=Object(n.useState)(15),v=Object(j.a)(p,1)[0],w=Object(n.useState)(!0),S=Object(j.a)(w,2),y=S[0],C=S[1],E=Object(n.useState)(!1),N=Object(j.a)(E,2),H=N[0],D=N[1];Object(n.useEffect)((function(){y&&m.get("https://jsonplaceholder.typicode.com/posts?_limit=".concat(v,"&_page=").concat(l)).then((function(e){i([].concat(Object(x.a)(r),Object(x.a)(e.data.filter((function(e){return r.findIndex((function(t){return t.id==e.id}))<0}))))),b((function(e){return e+1})),f(e.headers["x-total-count"])})).finally((function(){D(!1),C(!1)}))}),[y]),Object(n.useEffect)((function(){return window.addEventListener("scroll",k),function(){window.removeEventListener("scroll",k)}}),[]),Object(n.useEffect)((function(){H&&r.length<u&&C(!0)}),[H]);var k=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&D(!0)};return Object(h.jsx)(g.Provider,{value:{chats:r,fetching:y},children:t})},v=function(e){var t=e.onChatOpen,c=Object(n.useContext)(g),s=c.chats,r=c.fetching;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.r,{className:"shadowPanelHeader",separator:!1,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(h.jsx)(l.l,{children:Object(h.jsxs)(l.o,{children:[s.map((function(e){return Object(h.jsx)(l.x,{before:Object(h.jsx)(l.n,{gradientColor:Object(l.J)(e.id),children:e.title.substring(0,2)}),onClick:function(){return t(e)},subtitle:Object(h.jsxs)(h.Fragment,{children:[(c="\u0410\u043b\u0435\u043a\u0441\u0435\u0439: \u0441\u0442\u0438\u043a\u0435\u0440 cnbrth cnbrth cnbrth cnbrt",n=25,c.length>n?c.substring(0,n)+"...":c)," \xb7 2h"]}),indicator:Object(h.jsx)(l.h,{mode:"primary",children:"10"}),children:e.title.substring(0,10)},e.id);var c,n})),r&&Object(h.jsx)(l.y,{})]})})]})},w=c(164),S=c(165),y=c(168),C=c(169),E=c(166),N=c(167),H=c(17),D=c.n(H),k=function(e,t){var c=Object(n.useState)((function(){var c=localStorage.getItem(t);return c?JSON.parse(c):e})),s=Object(j.a)(c,2),r=s[0],i=s[1];return Object(n.useEffect)((function(){localStorage.setItem(t,JSON.stringify(r))}),r),[r,i]},B=function(e){var t,c=e.user,s=e.hasBack,r=e.onClose,i=Object(n.useState)(null),a=Object(j.a)(i,2),o=a[0],b=a[1],d=k(null,"user"),O=Object(j.a)(d,1)[0];return Object(n.useEffect)((function(){D.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users/".concat(c)).then((function(e){b(e.data)}))}),[]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.r,{className:"shadowPanelHeader",separator:!1,before:s&&Object(h.jsx)(l.s,{onClick:r}),children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),!o&&Object(h.jsx)(l.l,{children:Object(h.jsx)(l.y,{})}),o&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(l.l,{children:[Object(h.jsxs)(l.k,{mode:"tint",to:"top",className:"profileBIO",children:[Object(h.jsx)(l.n,{size:96,gradientColor:Object(l.J)(Number(o.phoneNumber%10)),children:o.username.substring(0,2)}),Object(h.jsx)(l.E,{level:"2",width:"2",className:"profileTitle",children:o.username}),Object(h.jsx)(l.D,{className:"profileSubTitle",children:o.bio}),O!=o.ID&&Object(h.jsxs)(l.e,{children:[Object(h.jsx)(l.d,{size:"m",sizeY:"compact",children:Object(h.jsx)(w.a,{})}),Object(h.jsx)(l.d,{size:"m",sizeY:"compact",before:Object(h.jsx)(S.a,{}),children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c"})]})]}),Object(h.jsx)(l.l,{header:Object(h.jsx)(l.m,{mode:"secondary",children:"\u0414\u0440\u0443\u0437\u044c\u044f"}),children:Object(h.jsx)(l.x,{className:"profileFriends",before:Object(h.jsx)(l.F,{size:"m",photos:["https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg","https://www.ixbt.com/img/n1/news/2018/7/4/341109.png","https://cdni.rt.com/russian/images/2022.09/article/63231abe02e8bd743524f678.png"]}),after:Object(h.jsx)(E.a,{width:30,height:30}),children:"1377 \u0434\u0440\u0443\u0437\u0435\u0439"})})]}),Object(h.jsxs)(l.l,{header:Object(h.jsx)(l.m,{mode:"secondary",children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),children:[Object(h.jsx)(l.p,{before:Object(h.jsx)(N.a,{}),textLevel:"primary",children:o.phoneNumber}),Object(h.jsx)(l.p,{before:Object(h.jsx)(y.a,{}),textLevel:"primary",children:o.email}),Object(h.jsx)(l.p,{before:Object(h.jsx)(C.a,{}),textLevel:"primary",children:(t=o.dateOfBirth,new Date(t).toLocaleString("ru-RU",{year:"numeric",month:"long",day:"numeric"}))})]}),Object(h.jsx)(l.l,{header:Object(h.jsx)(l.m,{mode:"secondary",children:"\u041b\u044e\u0431\u0438\u043c\u044b\u0435 \u0438\u0433\u0440\u044b"}),children:Object(h.jsxs)(l.o,{children:[Object(h.jsx)(l.f,{before:Object(h.jsx)(l.c,{src:"https://s2-goods.ozstatic.by/2000/42/893/10/10893042_0.jpg"}),description:"Carcassonne",children:"\u041a\u0430\u0440\u043a\u0430\u0441\u0441\u043e\u043d"}),Object(h.jsx)(l.f,{before:Object(h.jsx)(l.c,{src:"https://avatars.mds.yandex.net/get-mpic/6382710/img_id8546741754982085445.jpeg/orig"}),description:"Monopoly",children:"\u041c\u043e\u043d\u043e\u043f\u043e\u043b\u0438\u044f"}),Object(h.jsx)(l.f,{before:Object(h.jsx)(l.c,{src:"https://igromaster.by/upload/iblock/972/972ee18fcf89183f221bab04bcff0668.jpg"}),description:"Uno",children:"\u0423\u0301\u043d\u043e"})]})})]})]})},T=c(42),P=c(25),z=c.n(P),L=Object(n.createContext)(),I=function(){return Object(n.useContext)(L)},F=function(e){var t=e.children,c=e.chat,s=Object(n.useState)([]),r=Object(j.a)(s,2),i=r[0],a=r[1],o=Object(n.useState)([]),l=Object(j.a)(o,2),b=l[0],d=l[1],O=Object(n.useState)(!0),u=Object(j.a)(O,2),f=u[0],m=u[1],g=Object(n.useState)(1),p=Object(j.a)(g,2),v=p[0],w=p[1],S=Object(n.useState)(0),y=Object(j.a)(S,2),C=y[0],E=y[1],N=Object(n.useState)(30),H=Object(j.a)(N,1)[0],k=Object(n.useState)(!1),B=Object(j.a)(k,2),P=B[0],I=B[1],F=Object(n.useState)(!0),J=Object(j.a)(F,2),M=J[0],A=J[1],_=Object(n.useState)(2),q=Object(j.a)(_,2),U=q[0],X=q[1],Y=Object(n.useState)(!1),G=Object(j.a)(Y,2),R=G[0];G[1];Object(n.useEffect)(Object(T.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.a.get("https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users");case 2:t=e.sent,d(Object(x.a)(t.data.value)),setTimeout((function(){V()}),500);case 5:case"end":return e.stop()}}),e)}))),[]),Object(n.useEffect)((function(){f&&b.length>0&&V()}),[f]),Object(n.useEffect)((function(){c.members=b}),[b]);var V=function(){D.a.get("https://jsonplaceholder.typicode.com/comments?_limit=".concat(H,"&_page=").concat(v)).then((function(e){a([].concat(Object(x.a)(e.data),Object(x.a)(i))),w((function(e){return e+1})),E(e.headers["x-total-count"])})).finally((function(){I(!1),m(!1),1==v&&window.scrollTo(window.scrollX,document.body.scrollHeight)}))};Object(n.useEffect)((function(){return window.addEventListener("scroll",W),function(){window.removeEventListener("scroll",W)}}),[]),Object(n.useEffect)((function(){P&&i.length<C&&m(!0)}),[P]);var W=function(e){A(!1),e.target.documentElement.scrollTop<100&&I(!0),e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&A(!0)};return Object(h.jsx)(L.Provider,{value:{messages:i,fetching:f,members:b,chat:c,needScroll:M,limit:H,currentPage:v,sendMessage:function(e){A(!0);var t={senderId:1,chatId:2,email:"test@test.test",body:e};undefined.send(JSON.stringify(t)),a([].concat(Object(x.a)(i),[t])),X((function(e){return e+1}))},endOfPage:P,newMessageCount:U,openSocket:R},children:t})},J=function(e){var t=e.text;return Object(h.jsxs)("div",{className:"textSeparator",children:[Object(h.jsx)("div",{className:"line"}),Object(h.jsx)("div",{className:"text",children:t})]})},M=function(e){var t=e.self,c=void 0!==t&&t,n=e.text,s=e.caption,r=void 0===s?"":s,i=e.hasAvatar,a=void 0!==i&&i,o=e.avatar,j=e.title,b=e.id;return Object(h.jsxs)("div",{className:"messageBox ".concat(c?"self":""),children:[a&&o&&Object(h.jsx)(l.c,{size:25}),a&&!o&&Object(h.jsx)(l.n,{size:25,gradientColor:Object(l.J)(b),children:j.substring(0,2)}),Object(h.jsxs)("div",{className:"messageTextBox ".concat(c?"self":""),children:[!c&&Object(h.jsx)("div",{className:"messageTitle",children:j}),Object(h.jsx)("div",{children:n}),r&&Object(h.jsx)("div",{className:"messageCaption",children:r})]})]})},A=function(e){var t=e.isPublic,c=void 0===t||t,r=Object(n.useState)(0),i=Object(j.a)(r,2),a=i[0],o=i[1],b=I(),d=b.messages,O=b.fetching,u=b.needScroll,f=b.newMessageCount,x=b.endOfPage,m=Object(n.useState)(window.innerHeight),g=Object(j.a)(m,2),p=g[0],v=g[1],w=Object(n.useState)(!1),S=Object(j.a)(w,2),y=S[0],C=S[1],E=Object(n.useRef)(null);Object(n.useLayoutEffect)((function(){x&&window.scrollTo(window.scrollX,document.body.scrollTop+document.documentElement.scrollHeight-a),u&&E.current.scrollIntoView({behavior:"smooth"})}),[d]),Object(n.useLayoutEffect)((function(){x&&o(document.documentElement.scrollHeight)}),[x]),Object(n.useEffect)((function(){y&&(p-window.innerHeight>0&&window.scrollTo(window.scrollX,window.scrollY+p-window.innerHeight),p-window.innerHeight<0&&document.documentElement.scrollHeight-(document.documentElement.scrollTop+window.innerHeight)>Math.abs(p-window.innerHeight)&&window.scrollTo(window.scrollX,window.scrollY+p-window.innerHeight),v(window.innerHeight),C(!1))}),[y]);var N=function(){C(!0)};return Object(n.useEffect)((function(){return window.addEventListener("resize",N),function(){return window.removeEventListener("resize",N)}}),[]),Object(h.jsxs)(h.Fragment,{children:[O&&Object(h.jsx)(l.y,{style:{marginTop:10}}),Object(h.jsx)("div",{className:"messageList",children:d.map((function(e,t,n){return Object(h.jsxs)(s.a.Fragment,{children:[n.length-t==f&&Object(h.jsx)(J,{text:"\u041d\u043e\u0432\u044b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(h.jsx)(M,{text:e.body,caption:e.id,hasAvatar:e.id%2==1&&c,self:e.id%2==0,title:c&&e.email,avatar:e.avatar,id:e.id})]},t)}))}),Object(h.jsx)("div",{ref:E})]})},_=c(170),q=function(e){var t=e.onClose,c=e.onOpenChatMembersList,s=Object(n.useState)(""),r=Object(j.a)(s,2),i=r[0],a=r[1],o=Object(n.useState)(0),b=Object(j.a)(o,2),d=b[0],O=b[1],u=Object(n.useRef)(),f=I(),x=f.chat,m=f.sendMessage,g=f.openSocket,p=f.members;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.r,{className:"shadowPanelHeader",separator:!1,before:Object(h.jsx)(l.s,{onClick:t}),after:p.length>0&&Object(h.jsx)(l.t,{onClick:c,children:Object(h.jsx)(_.a,{})}),children:Object(h.jsx)(l.u,{before:Object(h.jsx)(l.n,{size:36,gradientColor:Object(l.J)(x.id),children:x.title.substring(0,2)}),status:"".concat(p.length," \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432"),children:x.title.substring(0,10)})}),Object(h.jsx)(A,{}),Object(h.jsx)(l.j,{vertical:"bottom",style:{paddingBottom:0},children:Object(h.jsxs)("div",{ref:u,children:[Object(h.jsx)(l.w,{wide:!0}),Object(h.jsx)(l.H,{value:i,onChange:function(e){return a(e.target.value)},onHeightChange:function(){return function(){var e=u.current;if(e){var t=e.offsetHeight;t!==d&&O(t)}}()},placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",after:Object(h.jsx)(n.Fragment,{children:Object(h.jsx)(l.I,{mode:"send",disabled:0===i.length||!g,onClick:function(){return m(i),void a("")}})})})]})})]})},U=function(e){var t=e.onClose,c=e.chat,n=e.onOpenProfile;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.r,{className:"shadowPanelHeader",separator:!1,before:Object(h.jsx)(l.s,{onClick:t}),children:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438"}),Object(h.jsxs)(l.l,{className:"d-f-center",children:[Object(h.jsx)(l.n,{size:100,gradientColor:Object(l.J)(c.id),children:c.title.substring(0,2)}),Object(h.jsx)(l.E,{children:c.title.substring(0,10)})]}),Object(h.jsx)(l.l,{children:Object(h.jsx)(l.o,{children:c.members.map((function(e){return Object(h.jsx)(l.x,{before:Object(h.jsx)(l.n,{size:48,gradientColor:Object(l.J)(Number(e.phoneNumber%10)),children:e.username.substring(0,2)}),subtitle:e.bio,onClick:function(){return n(e.ID)},children:e.username},e.ID)}))})})]})},X=function(){var e=Object(n.useState)("bright_light"),t=Object(j.a)(e,2),c=t[0],s=(t[1],Object(n.useState)("messages")),r=Object(j.a)(s,2),i=r[0],a=r[1],o=Object(n.useState)("messages"),u=Object(j.a)(o,2),x=u[0],m=u[1],g=Object(n.useState)(null),w=Object(j.a)(g,2),S=w[0],y=w[1],C=Object(n.useState)(!0),E=Object(j.a)(C,2),N=E[0],H=E[1],D=k(null,"user"),T=Object(j.a)(D,1)[0],P=Object(n.useState)(T),z=Object(j.a)(P,2),L=z[0],I=z[1],J=function(e){return a(e.currentTarget.dataset.story)};return Object(h.jsx)(l.g,{scheme:c,webviewType:"internal",children:Object(h.jsx)(l.a,{children:Object(h.jsx)(l.b,{children:Object(h.jsx)(l.A,{header:Object(h.jsx)(l.r,{separator:!1}),style:{justifyContent:"center"},children:Object(h.jsx)(l.z,{animate:!0,spaced:!1,width:"100%",maxWidth:"100%",children:Object(h.jsxs)(l.i,{activeStory:i,tabbar:N&&Object(h.jsxs)(l.B,{children:[Object(h.jsx)(l.C,{onClick:J,selected:"events"===i,"data-story":"events",text:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",children:Object(h.jsx)(b.a,{})}),Object(h.jsx)(l.C,{onClick:J,selected:"messages"===i,"data-story":"messages",text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",children:Object(h.jsx)(d.a,{})}),Object(h.jsx)(l.C,{onClick:J,selected:"profile"===i,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(h.jsx)(O.a,{})})]}),children:[Object(h.jsx)(l.G,{id:"events",activePanel:"events",children:Object(h.jsx)(l.q,{id:"events",children:Object(h.jsx)(f,{})})}),Object(h.jsxs)(l.G,{id:"messages",activePanel:x,children:[Object(h.jsx)(l.q,{id:"messages",children:Object(h.jsx)(p,{children:Object(h.jsx)(v,{onChatOpen:function(e){y(e),m("chat"),H(!1)}})})}),Object(h.jsx)(l.q,{id:"chat",className:"chatPanel",children:Object(h.jsx)(F,{chat:S,children:Object(h.jsx)(q,{onClose:function(){m("messages"),H(!0)},onOpenChatMembersList:function(e){m("chatMembers")}})})}),Object(h.jsx)(l.q,{id:"chatMembers",children:Object(h.jsx)(U,{onOpenProfile:function(e){I(e),a("profile")},chat:S,onClose:function(){m("chat")}})})]}),Object(h.jsx)(l.G,{id:"profile",activePanel:"profile",children:Object(h.jsx)(l.q,{id:"profile",children:Object(h.jsx)(B,{hasBack:!N,onClose:function(){I(T),a("messages")},user:L})})})]})})})})})})};o.a.send("VKWebAppInit"),localStorage.setItem("user",JSON.stringify("027b4656-bccc-4a0a-9508-6a9ae173bb95")),i.a.render(Object(h.jsx)(X,{}),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.3fe2970b.chunk.js.map