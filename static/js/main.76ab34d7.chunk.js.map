{"version":3,"sources":["context/chatContext.js","panels/events.js","context/chatListContext.js","panels/messages.js","hooks/useShortText.js","hooks/useLocalStorage.js","panels/profile.js","hooks/useTextDate.js","components/textSeparator.js","messageComponents/message.js","messageComponents/messageList.js","panels/chat.js","panels/chatMembersList.js","components/mapEventMarker.js","panels/map.js","App.js","panels/signIn.js","panels/signUp.js","index.js"],"names":["socket","axios","require","Events","useState","events","setEvents","currentPage","setCurrentPage","totalCount","setTotalCount","limit","fetching","setFetching","endOfPage","setEndOfPage","useEffect","get","then","response","data","value","prev","finally","window","addEventListener","scrollHandler","removeEventListener","length","e","target","documentElement","scrollHeight","scrollTop","innerHeight","className","separator","map","size","mode","level","style","marginBottom","name","descr","header","createdBy","Date","timeStamp","toLocaleString","day","month","year","hour","minute","before","ID","Context","createContext","ChatListContextProvider","children","chats","setChats","filter","findIndex","c","id","headers","Provider","Messages","onChatOpen","useContext","gradientColor","calcInitialsAvatarColor","title","substring","onClick","subtitle","str","indicator","useLocalStorage","initialValue","key","storage","localStorage","getItem","JSON","parse","setValue","setItem","stringify","Profile","d","user","hasBack","onClose","userInfo","setUserInfo","currentUser","to","Number","phoneNumber","username","width","bio","sizeY","photos","after","height","textLevel","email","dateOfBirth","src","description","useChatContextProvider","ChatContextProvider","chat","messages","setMessages","members","setMembers","needScroll","setNeedScroll","newMessageCount","setNewMessageCount","openSocket","setOpenSocket","a","membersResponse","setTimeout","getMessages","WebSocket","openWebSocketHandler","close","scrollTo","scrollX","document","body","console","log","sendMessage","text","message","send","TextSeparator","Message","self","caption","hasAvatar","avatar","MessageList","isPublic","setScrollHeight","windowHeight","setWindowHeight","didResize","setDidResize","bottomRef","useRef","useLayoutEffect","current","scrollIntoView","behavior","scrollY","Math","abs","resizeHandler","marginTop","m","index","arr","Fragment","ref","Chat","onOpenChatMembersList","writeBarText","setWriteBarText","bottomPadding","setBottomPadding","fixedLayoutInnerElRef","status","vertical","paddingBottom","wide","onChange","onHeightChange","el","offsetHeight","updateBottomPadding","placeholder","disabled","ChatMembersList","onOpenProfile","MapEventMarker","event","timer","setTimer","stopPropagation","closest","classList","add","remove","onTouchEnd","clearTimeout","onTouchStart","preventDefault","querySelector","longTouch","MapPanel","bootstrapURLKeys","defaultCenter","lat","lng","defaultZoom","coords_lat","coords_lng","App","scheme","activeStory","setActiveStory","messagesActivePanel","setMessagesActivePanel","setChat","hasTabbar","setHasTabbar","setUser","onStoryChange","currentTarget","dataset","story","appearance","webviewType","WebviewType","INTERNAL","justifyContent","animate","spaced","maxWidth","tabbar","selected","activePanel","onEventsOpen","user_id","SignIn","props","state","nickname","password","popout","snackbar","bind","onRemove","onSignIn","this","setState","showPatronym","setLoged","layout","background","fill","action","onActionClick","onSignUp","catch","top","type","stretched","React","Component","SignUp","password1","password2","date","sex","post","toISOString","setWillSignUp","hasMouse","bottom","min","max","dayPlaceholder","monthPlaceholder","yearPlaceholder","defaultValue","onDateChange","options","label","bridge","Index","loged","willSignUp","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.76ab34d7.chunk.js","sourcesContent":["import axios from \"axios\";\r\nimport { createContext, useContext, useEffect, useLayoutEffect, useRef, useState } from \"react\";\r\n\r\nconst Context = createContext()\r\n\r\nexport const useChatContextProvider = () => {\r\n    return useContext(Context)\r\n}\r\n\r\nlet socket\r\n\r\nexport const ChatContextProvider = ({children, chat}) => {\r\n    const [messages, setMessages] = useState([])\r\n    const [members, setMembers] = useState([]);\r\n    const [fetching, setFetching] = useState(true);\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [totalCount, setTotalCount] = useState(0)\r\n    const [limit] = useState(30)\r\n    const [endOfPage, setEndOfPage] = useState(false)\r\n    const [needScroll, setNeedScroll] = useState(true)\r\n    const [newMessageCount, setNewMessageCount] = useState(2)\r\n    const [openSocket, setOpenSocket] = useState(false)\r\n\r\n    useEffect(async () => {\r\n        const membersResponse = await axios.get(\"https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users\")\r\n        setMembers([...membersResponse.data.value]) \r\n        setTimeout(() => {\r\n            getMessages()\r\n        }, 500)\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        socket = new WebSocket(\"ws://192.168.160.194:8087/hello\")\r\n        socket.addEventListener(\"opne\", openWebSocketHandler)\r\n        return () => {\r\n            socket.removeEventListener(\"opne\", openWebSocketHandler)\r\n            socket.close()\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (fetching && members.length > 0) {\r\n            getMessages()\r\n        }\r\n    }, [fetching])\r\n\r\n    useEffect(() => {\r\n        chat.members = members\r\n    }, [members])\r\n\r\n    const getMessages = () => {\r\n        axios\r\n            .get(`https://jsonplaceholder.typicode.com/comments?_limit=${limit}&_page=${currentPage}`)\r\n            .then(response => {\r\n                setMessages([...response.data, ...messages])\r\n                setCurrentPage(prev => prev + 1)\r\n                setTotalCount(response.headers[\"x-total-count\"])\r\n            })\r\n            .finally(() => {\r\n                setEndOfPage(false)\r\n                setFetching(false)\r\n                currentPage == 1 && window.scrollTo(window.scrollX, document.body.scrollHeight) \r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"scroll\", scrollHandler)\r\n        return function () {\r\n            window.removeEventListener(\"scroll\", scrollHandler)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (endOfPage && messages.length < totalCount) {\r\n            setFetching(true)\r\n        }\r\n    }, [endOfPage])\r\n\r\n    const scrollHandler = (e) => {\r\n        setNeedScroll(false)\r\n        if (e.target.documentElement.scrollTop < 100) {\r\n            setEndOfPage(true)\r\n        }\r\n        if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\r\n            setNeedScroll(true)\r\n        }\r\n    }\r\n\r\n    const sendMessage = (text) => {\r\n        setNeedScroll(true)\r\n        const message = {\r\n            \"senderId\": 1,\r\n            \"chatId\": 2,\r\n            \"email\": \"test@test.test\",\r\n            \"body\": text\r\n        }\r\n        socket.send(JSON.stringify(message))\r\n        setMessages([...messages, message])\r\n        setNewMessageCount(prev => prev + 1)\r\n    }\r\n\r\n    const openWebSocketHandler = (e) => {\r\n        setOpenSocket(true)\r\n        console.log(e);\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={{\r\n            messages,\r\n            fetching,\r\n            members, \r\n            chat,\r\n            needScroll,\r\n            limit,\r\n            currentPage,\r\n            sendMessage,\r\n            endOfPage,\r\n            newMessageCount,\r\n            openSocket\r\n        }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}","import { Icon12Add, Icon16InfoOutline, Icon24Add, Icon24InfoCircleOutline } from \"@vkontakte/icons\";\r\nimport { Group, PanelHeader, CardGrid, Card, div, Title, Text, Caption, Button, List, Spinner, Paragraph, InfoRow, ButtonGroup, IconButton } from \"@vkontakte/vkui\"\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst axios = require('axios');\r\n\r\n\r\nexport const Events = () => {\r\n\r\n    const [events, setEvents] = useState([])\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [totalCount, setTotalCount] = useState(0)\r\n    const [limit] = useState(15)\r\n    const [fetching, setFetching] = useState(true)\r\n    const [endOfPage, setEndOfPage] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (fetching) {\r\n            axios\r\n                .get(`https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Events?$count=true&$top=${limit}&$skip=${(currentPage - 1) * limit}`)\r\n                .then(response => {\r\n                    setEvents([...events, ...response.data.value])\r\n                    setTotalCount(response.data[\"@odata.count\"])\r\n                    setCurrentPage(prev => prev + 1)\r\n                })\r\n                .finally(() => {\r\n                    setEndOfPage(false)\r\n                    setFetching(false)\r\n                })\r\n        }\r\n    }, [fetching])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"scroll\", scrollHandler)\r\n        return function () {\r\n            window.removeEventListener(\"scroll\", scrollHandler)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (endOfPage && events.length < totalCount) {\r\n            setFetching(true)\r\n        }\r\n    }, [endOfPage])\r\n\r\n    const scrollHandler = (e) => {\r\n        if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\r\n            setEndOfPage(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader className=\"shadowPanelHeader\" separator={false}>События</PanelHeader>\r\n            <Group>\r\n                <List>\r\n                    {\r\n                        events.map(e => {\r\n                            return (\r\n                                <CardGrid size=\"l\" key={e.ID}>\r\n                                    <Card mode=\"shadow\">\r\n                                        <div className=\"eventCardInner\">\r\n                                            <Title level=\"1\" style={{ marginBottom: 5 }}>\r\n                                                {e.name}\r\n                                            </Title>\r\n                                            <Text className=\"eventDescription\">\r\n                                                {e.descr}\r\n                                            </Text>\r\n                                            <div className=\"eventBottom\">\r\n                                                <InfoRow className=\"eventBottomItem\" header=\"Организатор\">{e.createdBy}</InfoRow>\r\n                                                <InfoRow className=\"eventBottomItem\" header=\"Дата проведения\">{\r\n                                                    new Date(e.timeStamp).toLocaleString(\"ru-RU\", {\r\n                                                        day: \"numeric\",\r\n                                                        month: \"short\",\r\n                                                        year: \"numeric\",\r\n                                                        hour: \"numeric\",\r\n                                                        minute: \"numeric\"\r\n                                                    })\r\n                                                }</InfoRow>\r\n                                            </div>\r\n                                            <div className=\"eventBottom\">\r\n                                                <Button mode=\"outline\" before={<Icon12Add />}>Присоединиться</Button>\r\n                                            </div>\r\n                                            <IconButton className=\"eventInfoButton\"><Icon24InfoCircleOutline/></IconButton>\r\n                                        </div> \r\n                                    </Card>\r\n                                </CardGrid>\r\n                            )\r\n                        })\r\n                    }\r\n                    {fetching && <Spinner />}\r\n                </List>\r\n            </Group>\r\n        </>\r\n    )\r\n\r\n}\r\n","import { createContext, useContext, useEffect, useState } from \"react\";\r\nconst axios = require('axios');\r\n\r\nconst Context = createContext()\r\n\r\nexport const useChatListContextProvider = () => {\r\n    return useContext(Context)\r\n}\r\n\r\nexport const ChatListContextProvider = ({children}) => {\r\n\r\n    const [chats, setChats] = useState([])\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [totalCount, setTotalCount] = useState(0)\r\n    const [limit] = useState(15)\r\n    const [fetching, setFetching] = useState(true)\r\n    const [endOfPage, setEndOfPage] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (fetching) {\r\n            axios\r\n                .get(`https://jsonplaceholder.typicode.com/posts?_limit=${limit}&_page=${currentPage}`)\r\n                .then(response => {\r\n                    setChats([...chats, ...response.data.filter(e => chats.findIndex(c => c.id == e.id) < 0)])\r\n                    setCurrentPage(prev => prev + 1)\r\n                    setTotalCount(response.headers[\"x-total-count\"])\r\n                })\r\n                .finally(() => {\r\n                    setEndOfPage(false)\r\n                    setFetching(false)\r\n                })\r\n        }\r\n    }, [fetching])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"scroll\", scrollHandler)\r\n        return function () {\r\n            window.removeEventListener(\"scroll\", scrollHandler)\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (endOfPage && chats.length < totalCount) {\r\n            setFetching(true)\r\n        }\r\n    }, [endOfPage])\r\n\r\n    const scrollHandler = (e) => {\r\n        if (e.target.documentElement.scrollHeight - (e.target.documentElement.scrollTop + window.innerHeight) < 100) {\r\n            setEndOfPage(true)\r\n        }\r\n    }\r\n\r\n    const newMessageHandler = (message) => {\r\n        const index = chats.findIndex(e => e.id == message.id)\r\n        if (index > -1) {\r\n            const temp = [...chats]\r\n            temp.splice(index, 1)\r\n            setChats([message, ...temp])\r\n        } else {\r\n            setChats([message, ...chats])\r\n        };\r\n    }\r\n\r\n    return (\r\n        <Context.Provider value={{\r\n            chats,\r\n            fetching\r\n        }}>\r\n            {children}\r\n        </Context.Provider>\r\n    )\r\n}","import { calcInitialsAvatarColor, Counter, Group, InitialsAvatar, List, PanelHeader, RichCell, SimpleCell, Spinner, Text, Title } from \"@vkontakte/vkui\"\r\nimport { useEffect } from \"react\"\r\nimport { useChatListContextProvider } from \"../context/chatListContext\"\r\nimport { useShortText } from \"../hooks/useShortText\"\r\n\r\nexport const Messages = ({onChatOpen}) => {\r\n\r\n    const { chats, fetching } = useChatListContextProvider()\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader className=\"shadowPanelHeader\" separator={false}>Сообщения</PanelHeader>\r\n            <Group>\r\n                <List>\r\n                    {\r\n                        chats.map(e => {\r\n                            return (\r\n                                <SimpleCell\r\n                                    before={\r\n                                        <InitialsAvatar gradientColor={calcInitialsAvatarColor(e.id)}>\r\n                                            {e.title.substring(0, 2)}\r\n                                        </InitialsAvatar>}\r\n                                    key={e.id}\r\n                                    onClick={() => onChatOpen(e)}\r\n                                    subtitle={\r\n                                        <>{useShortText(\"Алексей: стикер cnbrth cnbrth cnbrth cnbrt\", 25)} &#183; 2h</>\r\n                                    }\r\n                                    indicator={<Counter mode=\"primary\">10</Counter>}\r\n                                >\r\n                                    {e.title.substring(0, 10)}\r\n                                </SimpleCell>\r\n                            )\r\n                        })\r\n                    }\r\n                    {fetching && <Spinner />}\r\n                </List>\r\n            </Group>\r\n        </>\r\n    )\r\n}","export const useShortText = (str, length) => {\r\n    return str.length > length ? str.substring(0, length) + \"...\" : str\r\n}","import { useEffect, useState } from \"react\"\r\n\r\nexport const useLocalStorage = (initialValue, key) => {\r\n    const getValue = () => {\r\n        const storage = localStorage.getItem(key)\r\n        if (storage) {\r\n            return JSON.parse(storage)\r\n        }\r\n        return initialValue\r\n    }\r\n\r\n    const [value, setValue] = useState(getValue)\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(key, JSON.stringify(value))\r\n    }, [value])\r\n\r\n    return [value, setValue]\r\n}","import {\r\n    Icon24CactusOutline,\r\n    Icon24CalendarOutline,\r\n    Icon24MailOutline,\r\n    Icon24MessageOutline,\r\n    Icon24UserAddOutline} from \"@vkontakte/icons\"\r\nimport {Group, PanelHeader, Button, Gradient, Text, SimpleCell, UsersStack, MiniInfoCell, Spinner, calcInitialsAvatarColor, InitialsAvatar, PanelHeaderBack} from \"@vkontakte/vkui\"\r\nimport {Header, Avatar, Title, Cell, List} from \"@vkontakte/vkui\";\r\nimport {ButtonGroup} from \"@vkontakte/vkui\";\r\nimport { Icon24ChevronCompactRight } from '@vkontakte/icons';\r\nimport { Icon24PhoneOutline } from '@vkontakte/icons';\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useTextDate } from \"../hooks/useTextDate\";\r\nimport { useLocalStorage } from \"../hooks/useLocalStorage\";\r\n\r\nexport const Profile = ({user, hasBack, onClose}) => {\r\n    const [userInfo, setUserInfo] = useState(null)\r\n    const [currentUser] = useLocalStorage(null, \"user\")\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(`https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users/${user}`)\r\n            .then(response => {\r\n                setUserInfo(response.data)\r\n            })\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n                <PanelHeader \r\n                    className=\"shadowPanelHeader\" \r\n                    separator={false}\r\n                    before={hasBack && <PanelHeaderBack onClick={onClose}/>}\r\n                >\r\n                    Профиль\r\n                </PanelHeader>\r\n            {!userInfo && <Group><Spinner /></Group>}\r\n            {userInfo && \r\n                <>\r\n                    <Group>\r\n                        <Gradient\r\n                            mode=\"tint\"\r\n                            to=\"top\"\r\n                            className=\"profileBIO\"\r\n                        >\r\n                            <InitialsAvatar size={96} gradientColor={calcInitialsAvatarColor(Number(userInfo.phoneNumber % 10))}>\r\n                                {userInfo.username.substring(0, 2)}\r\n                            </InitialsAvatar>\r\n                            <Title level=\"2\" width=\"2\" className=\"profileTitle\">\r\n                                {userInfo.username}\r\n                            </Title>\r\n                            <Text className=\"profileSubTitle\">\r\n                                {userInfo.bio}\r\n                            </Text>\r\n                            {currentUser != userInfo.ID && \r\n                                <ButtonGroup>\r\n                                    <Button size=\"m\" sizeY=\"compact\"><Icon24UserAddOutline /></Button>\r\n                                    <Button\r\n                                        size=\"m\"\r\n                                        sizeY=\"compact\"\r\n                                        before={<Icon24MessageOutline />}\r\n                                    >\r\n                                        Написать\r\n                                    </Button>\r\n                                </ButtonGroup>\r\n                            }\r\n                        </Gradient>\r\n                        <Group header={<Header mode=\"secondary\">Друзья</Header>}>\r\n                            <SimpleCell className=\"profileFriends\"\r\n                                before={\r\n                                    <UsersStack\r\n                                        size=\"m\"\r\n                                        photos={[\r\n                                            \"https://www.iphones.ru/wp-content/uploads/2021/09/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0-2021-09-07-%D0%B2-19.48.05.jpg\",\r\n                                            \"https://www.ixbt.com/img/n1/news/2018/7/4/341109.png\",\r\n                                            \"https://cdni.rt.com/russian/images/2022.09/article/63231abe02e8bd743524f678.png\"\r\n                                        ]}\r\n                                    >\r\n                                    </UsersStack>\r\n                                }\r\n                                after={\r\n                                    <Icon24ChevronCompactRight width={30} height={30} />\r\n                                }\r\n                            >\r\n                                1377 друзей\r\n                            </SimpleCell>\r\n                        </Group>\r\n                    </Group>\r\n                    <Group header={<Header mode=\"secondary\">Информация</Header>}>\r\n                        <MiniInfoCell before={<Icon24PhoneOutline />} textLevel=\"primary\">\r\n                            {userInfo.phoneNumber}\r\n                        </MiniInfoCell>\r\n                        <MiniInfoCell before={<Icon24MailOutline />} textLevel=\"primary\">\r\n                            {userInfo.email}\r\n                        </MiniInfoCell>\r\n                        <MiniInfoCell before={<Icon24CalendarOutline />} textLevel=\"primary\">\r\n                            {useTextDate(userInfo.dateOfBirth)}\r\n                        </MiniInfoCell>\r\n                    </Group>\r\n                    <Group header={<Header mode=\"secondary\">Любимые игры</Header>}>\r\n                        <List>\r\n                            <Cell\r\n                                before={<Avatar src={\"https://s2-goods.ozstatic.by/2000/42/893/10/10893042_0.jpg\"} />}\r\n                                description=\"Carcassonne\"\r\n                            >\r\n                                Каркассон\r\n                            </Cell>\r\n                            <Cell\r\n                                before={<Avatar\r\n                                    src={\"https://avatars.mds.yandex.net/get-mpic/6382710/img_id8546741754982085445.jpeg/orig\"} />}\r\n                                description=\"Monopoly\"\r\n                            >\r\n                                Монополия\r\n                            </Cell>\r\n                            <Cell\r\n                                before={<Avatar\r\n                                    src={\"https://igromaster.by/upload/iblock/972/972ee18fcf89183f221bab04bcff0668.jpg\"} />}\r\n                                description=\"Uno\"\r\n                            >\r\n                                У́но\r\n                            </Cell>\r\n                        </List>\r\n                    </Group>\r\n                </>\r\n            }\r\n        </>\r\n    )\r\n}","export const useTextDate = (d) => {\r\n    const date = new Date(d)\r\n    return date.toLocaleString(\"ru-RU\", {\r\n        year: \"numeric\",\r\n        month: \"long\",\r\n        day: \"numeric\"\r\n    })\r\n}","import { Header } from \"@vkontakte/vkui\";\r\n\r\nexport const TextSeparator = ({text}) => {\r\n    return ( \r\n        <div className=\"textSeparator\">\r\n            <div className=\"line\"></div>\r\n            <div className=\"text\">\r\n                {text}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n ","import { Avatar, calcInitialsAvatarColor, InitialsAvatar } from \"@vkontakte/vkui\"\r\n\r\nexport const Message = ({\r\n    self = false, \r\n    text,\r\n    caption = \"\",\r\n    hasAvatar = false,\r\n    avatar,\r\n    title,\r\n    id\r\n\r\n}) => {\r\n    return (\r\n        <div className={`messageBox ${self ? \"self\" : \"\"}`}>\r\n            {hasAvatar && avatar && <Avatar size={25}/>}\r\n            {hasAvatar && !avatar && \r\n                <InitialsAvatar size={25} gradientColor={calcInitialsAvatarColor(id)}>\r\n                    {title.substring(0, 2)}\r\n                </InitialsAvatar>\r\n            }\r\n            <div className={`messageTextBox ${self ? \"self\" : \"\"}`}>\r\n                {!self && <div className=\"messageTitle\">{title}</div>}\r\n                <div>{text}</div>\r\n                {caption && <div className=\"messageCaption\">{caption}</div>}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Separator, Spinner } from \"@vkontakte/vkui\";\r\nimport React, { useEffect, useLayoutEffect, useRef, useState } from \"react\"\r\nimport { TextSeparator } from \"../components/textSeparator\";\r\nimport { useChatContextProvider } from \"../context/chatContext\";\r\nimport { Message } from \"./message\"\r\n\r\nexport const MessageList = ({ isPublic = true}) => {\r\n    const [scrollHeight, setScrollHeight] = useState(0)\r\n    const { messages, fetching, needScroll, newMessageCount, endOfPage } = useChatContextProvider()\r\n    const [windowHeight, setWindowHeight] = useState(window.innerHeight)\r\n    const [didResize, setDidResize] = useState(false)\r\n\r\n    const bottomRef = useRef(null)\r\n\r\n    useLayoutEffect(() => {\r\n        if (endOfPage) {\r\n            window.scrollTo(\r\n                window.scrollX,\r\n                document.body.scrollTop + document.documentElement.scrollHeight - scrollHeight\r\n            )\r\n        }\r\n        if(needScroll) {\r\n            bottomRef.current.scrollIntoView({ behavior: \"smooth\"})\r\n        }\r\n    }, [messages]);\r\n\r\n    useLayoutEffect(() => {\r\n        if (endOfPage) {\r\n            setScrollHeight(document.documentElement.scrollHeight)\r\n        }\r\n    }, [endOfPage])\r\n\r\n    useEffect(() => {\r\n        if (didResize) {\r\n            if (windowHeight - window.innerHeight > 0) {\r\n                window.scrollTo(window.scrollX, window.scrollY + windowHeight - window.innerHeight)\r\n            } \r\n            if (windowHeight - window.innerHeight < 0) {\r\n                if (document.documentElement.scrollHeight - (document.documentElement.scrollTop + window.innerHeight) > Math.abs(windowHeight - window.innerHeight)) {\r\n                    window.scrollTo(window.scrollX, window.scrollY + windowHeight - window.innerHeight)\r\n                }\r\n            }\r\n            \r\n            setWindowHeight(window.innerHeight)\r\n            setDidResize(false)\r\n        }\r\n    }, [didResize])\r\n\r\n    const resizeHandler = () => {\r\n        setDidResize(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"resize\", resizeHandler)\r\n        return () => window.removeEventListener(\"resize\", resizeHandler)\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            {fetching && <Spinner style={{marginTop: 10}} />} \r\n           \r\n            <div className=\"messageList\">\r\n                {messages.map(((m, index, arr) => {\r\n                    return ( \r\n                        <React.Fragment key={index}>\r\n                            {arr.length - index == newMessageCount && <TextSeparator text=\"Новые сообщения\" />}\r\n                            <Message\r\n                                text={m.body}\r\n                                caption={m.id}\r\n                                hasAvatar={m.id % 2 == 1 && isPublic}\r\n                                self={m.id % 2 == 0}\r\n                                title={isPublic && m.email}\r\n                                avatar={m.avatar}\r\n                                id={m.id}\r\n                            />\r\n                            {/* {arr[index + 1] ? m.id - arr[index + 1].id == 59 && <TextSeparator text={`${m.id - 59}-${m.id - 60 + 30}`} /> : <></>} */}\r\n                        </React.Fragment>\r\n                    )\r\n                }))}\r\n            </div>\r\n            <div ref={bottomRef}></div>\r\n        </>\r\n    )\r\n}","import { calcInitialsAvatarColor, Card, Cell, FixedLayout, Group, InitialsAvatar, PanelHeader, PanelHeaderBack, PanelHeaderButton, PanelHeaderContent, Separator, WriteBar, WriteBarIcon } from \"@vkontakte/vkui\"\r\nimport { Fragment, useEffect, useRef, useState } from \"react\";\r\nimport { useChatContextProvider } from \"../context/chatContext\";\r\nimport { MessageList } from \"../messageComponents/messageList\";\r\nimport { Icon28Users3Outline } from '@vkontakte/icons';\r\n\r\nexport const Chat = ({\r\n    onClose,\r\n    onOpenChatMembersList\r\n}) => {\r\n    const [writeBarText, setWriteBarText] = useState(\"\")\r\n    const [bottomPadding, setBottomPadding] = useState(0);\r\n\r\n    const fixedLayoutInnerElRef = useRef();\r\n\r\n    const { chat, sendMessage, openSocket, members } = useChatContextProvider()\r\n\r\n    const updateBottomPadding = () => {\r\n        const el = fixedLayoutInnerElRef.current;\r\n        if (el) {\r\n            const height = el.offsetHeight;\r\n            if (height !== bottomPadding) {\r\n                setBottomPadding(height);\r\n            }\r\n        }\r\n    };\r\n\r\n    const sendMessageHandler = () => {\r\n        sendMessage(writeBarText)\r\n        setWriteBarText(\"\")\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader\r\n                className=\"shadowPanelHeader\" \r\n                separator={false} \r\n                before={\r\n                    <PanelHeaderBack \r\n                        onClick={onClose}\r\n                    />}\r\n                after={members.length > 0 &&\r\n                    <PanelHeaderButton onClick={onOpenChatMembersList}>\r\n                        <Icon28Users3Outline/>\r\n                    </PanelHeaderButton>\r\n                }\r\n            >\r\n                <PanelHeaderContent\r\n                    before={\r\n                        <InitialsAvatar size={36} gradientColor={calcInitialsAvatarColor(chat.id)}>\r\n                            {chat.title.substring(0, 2)}\r\n                        </InitialsAvatar>\r\n                    }\r\n                    status={`${members.length} участников`}\r\n                >\r\n                    {chat.title.substring(0, 10)}\r\n                </PanelHeaderContent>\r\n            </PanelHeader>\r\n            <MessageList/>\r\n            <FixedLayout\r\n                vertical=\"bottom\"\r\n                style={{paddingBottom: 0}}\r\n            >\r\n                <div ref={fixedLayoutInnerElRef}>\r\n                    <Separator wide />\r\n                    <WriteBar\r\n                        value={writeBarText}\r\n                        onChange={(e) => setWriteBarText(e.target.value)}\r\n                        onHeightChange={() => updateBottomPadding()}\r\n                        placeholder=\"Сообщение\"\r\n                        after={\r\n                            <Fragment>\r\n                                <WriteBarIcon \r\n                                    mode=\"send\" \r\n                                    disabled={writeBarText.length === 0 || !openSocket}\r\n                                    onClick={() => sendMessageHandler()}\r\n                                />\r\n                            </Fragment>\r\n                        }\r\n                    />\r\n                </div>\r\n            </FixedLayout>\r\n        </>\r\n    )\r\n}","import { Avatar, calcInitialsAvatarColor, Cell, Group, Header, InitialsAvatar, List, PanelHeader, PanelHeaderBack, Separator, SimpleCell, Title } from \"@vkontakte/vkui\";\r\n\r\nexport const ChatMembersList = ({ onClose, chat, onOpenProfile }) => {\r\n    return ( \r\n        <>\r\n            <PanelHeader \r\n                className=\"shadowPanelHeader\" \r\n                separator={false}\r\n                before={\r\n                    <PanelHeaderBack\r\n                        onClick={onClose}\r\n                    />\r\n                }\r\n            >\r\n                Участники\r\n            </PanelHeader>\r\n            <Group className=\"d-f-center\">\r\n                <InitialsAvatar size={100} gradientColor={calcInitialsAvatarColor(chat.id)}>\r\n                    {chat.title.substring(0, 2)}\r\n                </InitialsAvatar>\r\n                <Title>{chat.title.substring(0, 10)}</Title>\r\n            </Group>\r\n            <Group>\r\n                <List>\r\n                    {chat.members.map(e =>\r\n                        <SimpleCell\r\n                            before={\r\n                                <InitialsAvatar size={48} gradientColor={calcInitialsAvatarColor(Number(e.phoneNumber % 10))}>\r\n                                    {e.username.substring(0, 2)}\r\n                                </InitialsAvatar>\r\n                            }\r\n                            key={e.ID}\r\n                            subtitle={e.bio}\r\n                            onClick={() => onOpenProfile(e.ID)}\r\n                        >\r\n                            {e.username}\r\n                        </SimpleCell>\r\n                    )}\r\n                </List>\r\n            </Group>\r\n        </>\r\n    );\r\n}\r\n","import { useState } from \"react\";\r\nimport { Icon24Add } from '@vkontakte/icons';\r\n\r\nexport const MapEventMarker = ({event}) => {\r\n\r\n    const [timer, setTimer] = useState(null)\r\n\r\n    const onClickHandler = (e) => {\r\n        e.stopPropagation()\r\n        console.log(e.target);\r\n        e.target.closest(\".mapMarkerInner\").classList.add(\"clicked\")\r\n        setTimeout(() => {\r\n            e.target.closest(\".mapMarkerInner\").classList.remove(\"clicked\")\r\n        }, 100)\r\n    }\r\n\r\n    const longTouch = (e) => {\r\n        e.target.closest(\".mapMarkerInner\").querySelector(\".mapMarkerMore\").classList.add(\"touch\")\r\n        e.target.closest(\".mapMarkerInner\").querySelector(\".close\").classList.add(\"active\")\r\n    }\r\n\r\n    const onTouchStartHandler = (e) => {\r\n        e.stopPropagation()\r\n        e.preventDefault()\r\n        setTimer(setTimeout(() => longTouch(e), 700))\r\n    }\r\n\r\n    const onTouchEndHandler = (e) => {\r\n        clearTimeout(timer)\r\n    }\r\n\r\n    const close = (e) => {\r\n        e.stopPropagation()\r\n        e.target.closest(\".mapMarkerInner\").querySelector(\".mapMarkerMore\").classList.remove(\"touch\")\r\n        e.target.closest(\".mapMarkerInner\").querySelector(\".close\").classList.remove(\"active\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"mapMarkerWrapper\">\r\n            <div onClick={onClickHandler} onTouchEnd={onTouchEndHandler} onTouchStart={onTouchStartHandler} className=\"mapMarkerInner\">\r\n                <div className=\"mapMarkerInfo\">\r\n                    <div className=\"mapMarkerContent\">\r\n                        <div className=\"mapMarkerTitle\">{event.name}</div>\r\n                        <div className=\"mapMarkerText\">{new Date(event.timeStamp).toLocaleString(\"ru-RU\", {\r\n                            day: \"numeric\",\r\n                            month: \"numeric\",\r\n                            year: \"2-digit\",\r\n                            hour: \"numeric\",\r\n                            minute: \"numeric\"\r\n                        })}</div>\r\n                        <div className=\"mapMarkerMore\">{event.descr}</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"mapBottom\">\r\n\r\n                </div>\r\n                <div className=\"close\" onClick={close}>\r\n                    <Icon24Add width={15} height={15}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Group, PanelHeader, Spinner } from \"@vkontakte/vkui\"\r\nimport axios from \"axios\";\r\nimport GoogleMapReact from 'google-map-react';\r\nimport { useEffect, useState } from \"react\";\r\nimport { MapEventMarker } from \"../components/mapEventMarker\";\r\n\r\nexport const MapPanel = () => {\r\n\r\n    const [events, setEvents] = useState(null)\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(\"https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Events\")\r\n            .then(response => {\r\n                setEvents(response.data.value)\r\n            })\r\n    }, [])\r\n\r\n    return (\r\n        <>\r\n            <PanelHeader separator={false} className=\"shadowPanelHeader\">\r\n                Карта событий\r\n            </PanelHeader>\r\n            <Group className=\"mapGroup\">\r\n                {!events && <Spinner/>}\r\n                {events && <GoogleMapReact\r\n                    bootstrapURLKeys={{ key: \"AIzaSyBY3XkvjucuJx55bzFZMTJQnYH5JnWK8SQ\" }}\r\n                    defaultCenter={{\r\n                        lat: 53.90478949220637,\r\n                        lng: 27.54735640149058\r\n                    }}\r\n                    defaultZoom={11}\r\n                >\r\n                    {events.map(e => <MapEventMarker event={e} lat={e.coords_lat} lng={e.coords_lng} />)}  \r\n                </GoogleMapReact>}\r\n            </Group>\r\n        </>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { View, AdaptivityProvider, AppRoot, ConfigProvider, SplitLayout, SplitCol, PanelHeader, Epic, Tabbar, TabbarItem, Panel, WebviewType } from '@vkontakte/vkui';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport { Icon28MessageOutline, Icon28NewsfeedOutline, Icon28PlaceOutline, Icon28UserCircleOutline } from '@vkontakte/icons';\r\nimport { Events } from './panels/events';\r\nimport { Messages } from './panels/messages';\r\nimport { Profile } from './panels/profile';\r\nimport { Chat } from './panels/chat';\r\nimport { ChatListContextProvider } from './context/chatListContext';\r\nimport { ChatContextProvider } from './context/chatContext';\r\nimport { ChatMembersList } from './panels/chatMembersList';\r\nimport { useLocalStorage } from './hooks/useLocalStorage';\r\nimport { MapPanel } from './panels/map';\r\n\r\nconst App = () => {\r\n\tconst [scheme, setScheme] = useState('light')\r\n\tconst [activeStory, setActiveStory] = useState(\"events\")\r\n\tconst [messagesActivePanel, setMessagesActivePanel] = useState(\"messages\")\r\n\tconst [chat, setChat] = useState(null)\r\n\tconst [hasTabbar, setHasTabbar] = useState(true)\r\n\tconst [currentUser] = useLocalStorage(null, \"user\")\r\n\tconst [user, setUser] = useState(currentUser)\r\n\r\n\tconst onStoryChange = (e) => setActiveStory(e.currentTarget.dataset.story)\r\n\r\n\tconst openChatHandler = (chat) => {\r\n\t\tsetChat(chat)\r\n\t\tsetMessagesActivePanel(\"chat\")\r\n\t\tsetHasTabbar(false)\r\n\t}\r\n\r\n\tconst openChatMembersHandler = (chat) => {\r\n\t\tsetMessagesActivePanel(\"chatMembers\")\r\n\t}\r\n\r\n\tconst closeChatHanler = () => {\r\n\t\tsetMessagesActivePanel(\"messages\")\r\n\t\tsetHasTabbar(true)\r\n\t}\r\n\r\n\tconst closeChatMembersHandler = () => {\r\n\t\tsetMessagesActivePanel(\"chat\")\r\n\t}\r\n\r\n\tconst openProfileHandler = (user_id) => {\r\n\t\tsetUser(user_id)\r\n\t\tsetActiveStory(\"profile\")\r\n\t}\r\n\r\n\tconst closeProfileHandler = () => {\r\n\t\tsetUser(currentUser)\r\n\t\tsetActiveStory(\"messages\")\r\n\t}\r\n\r\n\tconst openEventsHandler = (events) => {\r\n\t\tsetChat(events)\r\n\t\tsetMessagesActivePanel(\"events\")\r\n\t\tsetHasTabbar(false)\r\n\t}\r\n\tconst closeEventsHanler = () => {\r\n\t\tsetMessagesActivePanel(\"messages\")\r\n\t\tsetHasTabbar(true)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<ConfigProvider appearance={scheme} >\r\n\t\t\t<AdaptivityProvider webviewType={WebviewType.INTERNAL}>\r\n\t\t\t\t<AppRoot>\r\n\t\t\t\t\t<SplitLayout\r\n\t\t\t\t\t\theader={<PanelHeader separator={false} />}\r\n\t\t\t\t\t\tstyle={{ justifyContent: \"center\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<SplitCol\r\n\t\t\t\t\t\t\tanimate={true}\r\n\t\t\t\t\t\t\tspaced={false}\r\n\t\t\t\t\t\t\twidth={\"100%\"}\r\n\t\t\t\t\t\t\tmaxWidth={\"100%\"}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Epic\r\n\t\t\t\t\t\t\t\tactiveStory={activeStory}\r\n\t\t\t\t\t\t\t\ttabbar={hasTabbar &&\r\n\t\t\t\t\t\t\t\t\t<Tabbar>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"events\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"events\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"События\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28NewsfeedOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"map\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"map\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Карта\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28PlaceOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"messages\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"messages\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Сообщения\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28MessageOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t\t<TabbarItem\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={onStoryChange}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={activeStory === \"profile\"}\r\n\t\t\t\t\t\t\t\t\t\t\tdata-story=\"profile\"\r\n\t\t\t\t\t\t\t\t\t\t\ttext=\"Профиль\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Icon28UserCircleOutline />\r\n\t\t\t\t\t\t\t\t\t\t</TabbarItem>\r\n\t\t\t\t\t\t\t\t\t</Tabbar>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<View id=\"events\" activePanel=\"events\">\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"events\">\r\n\t\t\t\t\t\t\t\t\t\t<Events\r\n\t\t\t\t\t\t\t\t\t\t\tonEventsOpen={openEventsHandler}\r\n\t\t\t\t\t\t\t\t\t\t\tonClose={closeEventsHanler}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t<View id=\"map\" activePanel='map'>\r\n\t\t\t\t\t\t\t\t\t<Panel id='map'>\r\n\t\t\t\t\t\t\t\t\t\t<MapPanel/>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t<View id=\"messages\" activePanel={messagesActivePanel}>\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"messages\">\r\n\t\t\t\t\t\t\t\t\t\t<ChatListContextProvider>\r\n\t\t\t\t\t\t\t\t\t\t\t<Messages\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChatOpen={openChatHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</ChatListContextProvider>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"chat\" className=\"chatPanel\">\r\n\t\t\t\t\t\t\t\t\t\t<ChatContextProvider chat={chat}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Chat\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={closeChatHanler}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonOpenChatMembersList={openChatMembersHandler}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</ChatContextProvider>\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"chatMembers\">\r\n\t\t\t\t\t\t\t\t\t\t<ChatMembersList onOpenProfile={openProfileHandler} chat={chat} onClose={closeChatMembersHandler} />\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t\t<View id=\"profile\" activePanel=\"profile\">\r\n\t\t\t\t\t\t\t\t\t<Panel id=\"profile\">\r\n\t\t\t\t\t\t\t\t\t\t<Profile hasBack={!hasTabbar} onClose={closeProfileHandler} user={user} />\r\n\t\t\t\t\t\t\t\t\t</Panel>\r\n\t\t\t\t\t\t\t\t</View>\r\n\t\t\t\t\t\t\t</Epic>\r\n\t\t\t\t\t\t</SplitCol>\r\n\t\t\t\t\t</SplitLayout>\r\n\t\t\t\t</AppRoot>\r\n\t\t\t</AdaptivityProvider>\r\n\t\t</ConfigProvider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n","import { Group, PanelHeader, View, Panel, Button, FormLayout, FormItem, Input, FormLayoutGroup, DatePicker, Select, Textarea, Checkbox, Link, ConfigProvider, AdaptivityProvider, AppRoot, SplitLayout, ScreenSpinner, Header, Separator, Snackbar, Avatar, WebviewType, } from \"@vkontakte/vkui\"\r\nimport React from \"react\";\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport axios from \"axios\";\r\nimport { Icon16Cancel, Icon16ErrorCircleFill } from \"@vkontakte/icons\";\r\n\r\nexport class SignIn extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            nickname: \"\",\r\n            password: \"\",\r\n            popout: null,\r\n            snackbar: null\r\n        };\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onRemove = this.onRemove.bind(this);\r\n        this.onSignIn = this.onSignIn.bind(this)\r\n    }\r\n\r\n    onChange(e) {\r\n        const { name, value } = e.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    onRemove(e) {\r\n        this.setState({ showPatronym: false });\r\n    }\r\n\r\n    onSignIn() {\r\n        this.setState({popout: <ScreenSpinner state=\"loading\"/>})\r\n        axios\r\n            .get(`https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users?$filter=username%20eq%20%27${this.state.nickname}%27`)\r\n            .then(response => {\r\n                if (response.data.value.length > 0) {\r\n                    this.setState({ popout: <ScreenSpinner state=\"done\" /> })\r\n                    localStorage.setItem(\"user\", JSON.stringify(response.data.value[0][\"ID\"]))\r\n                    setTimeout(() => this.props.setLoged(true), 1500)\r\n                }\r\n                else {\r\n                    this.setState({ popout: <ScreenSpinner state=\"error\" /> })\r\n                    setTimeout(() => this.setState({ \r\n                        popout: null, \r\n                        snackbar: \r\n                            <Snackbar \r\n                                onClose={() => this.setState({snackbar: null})}\r\n                                layout=\"vertical\"\r\n                                before={\r\n                                    <Avatar\r\n                                        size={24}\r\n                                        style={{ background: \"var(--orange)\" }}\r\n                                    >\r\n                                        <Icon16Cancel fill=\"#fff\" width={14} height={14} />\r\n                                    </Avatar>\r\n                                }\r\n                                action=\"Зарегистрироваться\"\r\n                                onActionClick={() => this.props.onSignUp(true)}\r\n                            >\r\n                                Такого пользователя не существует\r\n                            </Snackbar> \r\n                    }), 1000)\r\n                }\r\n            })\r\n            .catch(() => {\r\n                this.setState({ popout: <ScreenSpinner state=\"error\" /> })\r\n                setTimeout(() => this.setState({ popout: null }), 1500)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { nickname, password } = this.state;\r\n\r\n        return (\r\n            <ConfigProvider webviewType={WebviewType.INTERNAL}>\r\n                <AdaptivityProvider>\r\n                    <AppRoot>\r\n                        <SplitLayout\r\n                            header={<PanelHeader separator={false} />}\r\n                            style={{ justifyContent: \"center\" }}\r\n                            popout={this.state.popout}\r\n                        >\r\n                            <View activePanel=\"new-user\">\r\n                                <Panel id=\"new-user\">\r\n                                    <PanelHeader>Авторизация</PanelHeader>\r\n                                    <Group>\r\n                                        <FormLayout>\r\n                                            <FormItem top=\"Никнейм\">\r\n                                                <Input\r\n                                                    type=\"nickname\"\r\n                                                    name=\"nickname\"\r\n                                                    value={nickname}\r\n                                                    onChange={this.onChange}\r\n                                                    placeholder=\"Введите никнейм\"\r\n                                                />\r\n                                            </FormItem>\r\n                                            <FormItem top=\"Пароль\">\r\n                                                <Input\r\n                                                    type=\"password\"\r\n                                                    name=\"password\"\r\n                                                    value={password}\r\n                                                    onChange={this.onChange}\r\n                                                    placeholder=\"Введите пароль\"\r\n                                                />\r\n                                            </FormItem>\r\n                                            <FormItem>\r\n                                                <Button \r\n                                                    onClick={this.onSignIn} \r\n                                                    size=\"l\" \r\n                                                    stretched \r\n                                                    disabled={!nickname || !password}\r\n                                                >\r\n                                                    Авторизоваться\r\n                                                </Button>\r\n                                            </FormItem>\r\n                                            <Separator/>\r\n                                            <FormItem>\r\n                                                <Header style={{ justifyContent: \"center\" }} mode=\"secondary\">Еще нет аккаунта?</Header>\r\n                                                <Button\r\n                                                    size=\"l\"\r\n                                                    stretched\r\n                                                    onClick={() => this.props.onSignUp(true)}\r\n                                                >\r\n                                                    Зарегистрироваться\r\n                                                </Button>\r\n                                            </FormItem>\r\n                                        </FormLayout>\r\n                                        {this.state.snackbar}\r\n                                    </Group>\r\n                                </Panel>\r\n                            </View>\r\n                        </SplitLayout>\r\n                    </AppRoot>\r\n                </AdaptivityProvider>\r\n            </ConfigProvider>\r\n        );\r\n    }\r\n}","import { Group, PanelHeader, View, Panel, Button, FormLayout, FormItem, Input, FormLayoutGroup, DatePicker, Select, Textarea, Checkbox, Link, ConfigProvider, AdaptivityProvider, AppRoot, SplitLayout, WebviewType, ScreenSpinner, } from \"@vkontakte/vkui\"\r\nimport axios from \"axios\";\r\nimport React from \"react\";\r\n\r\n\r\nexport class SignUp extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            email: \"\",\r\n            password1: \"\",\r\n            password2: \"\",\r\n            bio: \"\",\r\n            date: { day: 1, month: 1, year: 2002 },\r\n            sex: 0,\r\n            phoneNumber: \"\",\r\n            nickname: \"\",\r\n            popout: null\r\n        };\r\n\r\n        this.onChange = this.onChange.bind(this);\r\n        this.onSignUp = this.onSignUp.bind(this);\r\n    }\r\n\r\n    onChange(e) {\r\n        const { name, value } = e.currentTarget;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    onSignUp() {\r\n        this.setState({ popout: <ScreenSpinner state=\"loading\" /> })\r\n        axios\r\n            .post(\"https://b451dbd8trial-dev-dice.cfapps.us10.hana.ondemand.com/main/Users\", {\r\n                username: this.state.nickname,\r\n                email: this.state.email,\r\n                phoneNumber: this.state.phoneNumber,\r\n                bio: this.state.bio,\r\n                dateOfBirth: new Date(this.state.date.year, this.state.date.month - 1, this.state.date.day, 3, 0, 0).toISOString().substring(0, 10)\r\n            })\r\n            .then(response => {\r\n                this.setState({ popout: <ScreenSpinner state=\"done\" /> })\r\n                localStorage.setItem(\"user\", JSON.stringify(response.data.ID))\r\n                setTimeout(() => { this.props.setLoged(true), this.props.setWillSignUp(false) } , 1500)\r\n            })\r\n            .catch((e) => {\r\n                console.log(e);\r\n                this.setState({ popout: <ScreenSpinner state=\"error\" /> })\r\n                setTimeout(() => this.setState({ popout: null }), 1500)\r\n            })\r\n    }\r\n\r\n    render() {\r\n        const { email, password1, password2, nickname } = this.state;\r\n\r\n        return (\r\n            <ConfigProvider webviewType={WebviewType.INTERNAL}>\r\n                <AdaptivityProvider hasMouse={true}>\r\n                    <AppRoot>\r\n                        <SplitLayout\r\n                            header={<PanelHeader separator={false} />}\r\n                            style={{ justifyContent: \"center\" }}\r\n                            popout={this.state.popout}\r\n                        >\r\n                            <View activePanel=\"new-user\">\r\n                                <Panel id=\"new-user\">\r\n                                    <PanelHeader className=\"shadowPanelHeader\" separator={false}>Регистрация</PanelHeader>\r\n                                    <Group>\r\n                                        <FormLayout>\r\n                                            <FormItem\r\n                                                top=\"E-mail\"\r\n                                            >\r\n                                                <Input\r\n                                                    type=\"email\"\r\n                                                    name=\"email\"\r\n                                                    value={email}\r\n                                                    onChange={this.onChange}\r\n                                                />\r\n                                            </FormItem>\r\n\r\n                                            <FormLayoutGroup >\r\n                                                <FormItem top=\"Никнейм\">\r\n                                                    <Input name=\"nickname\" value={this.state.nickname} onChange={this.onChange}/>\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n\r\n                                            <FormItem top=\"Пароль\">\r\n                                                <Input\r\n                                                    type=\"password\"\r\n                                                    name=\"password1\"\r\n                                                    value={password1}\r\n                                                    onChange={this.onChange}\r\n                                                    placeholder=\"Введите пароль\"\r\n                                                />\r\n                                            </FormItem>\r\n\r\n                                            <FormItem\r\n                                                status={password1 != \"\" ?\r\n                                                    password2 != \"\" ?\r\n                                                        password1 == password2 ? \"valid\" : \"error\"\r\n                                                        : \"default\"\r\n                                                    : \"default\"}\r\n                                                bottom={\r\n                                                    password1 != \"\" ?\r\n                                                        password2 != \"\" ?\r\n                                                            password1 == password2 ? \"Пароли совпадают!\" : \"Пожалуйста, введите корректный пароль\"\r\n                                                            : \"Пароль может содержать только латинские буквы и цифры\"\r\n                                                        : \"Пароль может содержать только латинские буквы и цифры\"\r\n                                                }>\r\n                                                <Input\r\n                                                    type=\"password\"\r\n                                                    name=\"password2\"\r\n                                                    value={password2}\r\n                                                    onChange={this.onChange}\r\n                                                    placeholder=\"Повторите пароль\"\r\n                                                />\r\n                                            </FormItem>\r\n\r\n                                            <FormLayoutGroup>\r\n                                                <FormItem top=\"Номер телефона\">\r\n                                                    <Input \r\n                                                        value={this.state.phoneNumber} \r\n                                                        type=\"phone\" \r\n                                                        placeholder=\"+375290000000\"\r\n                                                        name=\"phoneNumber\"\r\n                                                        onChange={this.onChange} \r\n                                                    />\r\n                                                </FormItem>\r\n                                            </FormLayoutGroup>\r\n\r\n                                            <FormItem top=\"Дата рождения\">\r\n                                                <DatePicker\r\n                                                    min={{ day: 1, month: 1, year: 1901 }}\r\n                                                    max={{ day: 31, month: 12, year: 2022 }}\r\n                                                    dayPlaceholder=\"ДД\"\r\n                                                    monthPlaceholder=\"MM\"\r\n                                                    yearPlaceholder=\"ГГ\"\r\n                                                    defaultValue={this.state.date}\r\n                                                    onDateChange={value => this.setState({date: value})}\r\n                                                />\r\n                                            </FormItem>\r\n\r\n                                            <FormItem top=\"Пол\">\r\n                                                <Select\r\n                                                    placeholder=\"Выберите пол\"\r\n                                                    defaultValue={0}\r\n                                                    name=\"sex\"\r\n                                                    onChange={this.onChange}\r\n                                                    options={[\r\n                                                        {\r\n                                                            value: 1,\r\n                                                            label: \"Мужской\",\r\n                                                        },\r\n                                                        {\r\n                                                            value: 2,\r\n                                                            label: \"Женский\",\r\n                                                        },\r\n                                                        {\r\n                                                            value: 3,\r\n                                                            label: \"Другой\",\r\n                                                        },\r\n                                                    ]}\r\n                                                />\r\n                                            </FormItem>\r\n                                            <FormItem top=\"О себе\">\r\n                                                <Textarea name=\"bio\" onChange={this.onChange} value={this.state.bio}/>\r\n                                            </FormItem>\r\n                                            <FormItem>\r\n                                                <Button \r\n                                                    size=\"l\" \r\n                                                    stretched\r\n                                                    onClick={this.onSignUp}\r\n                                                    disabled={password1 == \"\" || password2 == \"\" || password1 != password2 || nickname == \"\"}\r\n                                                >\r\n                                                    Зарегистрироваться\r\n                                                </Button>\r\n                                            </FormItem>\r\n                                        </FormLayout>\r\n                                    </Group>\r\n                                </Panel>\r\n                            </View>\r\n                        </SplitLayout>\r\n                    </AppRoot>\r\n                </AdaptivityProvider>\r\n            </ConfigProvider>\r\n        );\r\n    }\r\n}","import React, { useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport App from \"./App\";\r\nimport { SignIn } from \"./panels/signIn\";\r\nimport './styles/index.css'\r\nimport { SignUp } from \"./panels/signUp\";\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\n// Init VK  Mini App\r\nbridge.send(\"VKWebAppInit\");\r\n\r\nconst Index = () => {\r\n    const [loged, setLoged] = useState(JSON.parse(localStorage.getItem(\"user\"))) \r\n    const [willSignUp, setWillSignUp] = useState(false)\r\n\r\n    return (\r\n        <>\r\n            {loged && !willSignUp && <App/>}\r\n            {!loged && !willSignUp && <SignIn setLoged={setLoged} onSignUp={setWillSignUp}/>}\r\n            {!loged && willSignUp && <SignUp setLoged={setLoged} setWillSignUp={setWillSignUp}/>}\r\n        </>\r\n    )\r\n}\r\n\r\nReactDOM.render(<Index/>, document.getElementById(\"root\"));\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\r\n}\r\n"],"sourceRoot":""}