(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{142:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var o=a(0),i=a.n(o),s=a(18),n=a.n(s),c=a(10),r=a.n(c),f=a(9),l=a(4),j=(a(141),a(142),a(171)),v=a(172),m=a(170),w=a(169),d=a(1),k=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.k,{children:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f"}),Object(d.jsx)(l.g,{style:{height:"1000px"},children:Object(d.jsx)(l.n,{icon:Object(d.jsx)(w.a,{width:56,height:56})})})]})},x=a(23),h=a(144),b=Object(o.createContext)(),p=function(e){var t=e.children,a=Object(o.useState)([]),i=Object(f.a)(a,2),s=i[0],n=i[1],c=Object(o.useState)(1),r=Object(f.a)(c,2),l=r[0],j=r[1],v=Object(o.useState)(0),m=Object(f.a)(v,2),w=(m[0],m[1]),k=Object(o.useState)(15),p=Object(f.a)(k,1)[0],O=Object(o.useState)(!0),N=Object(f.a)(O,2),u=N[0],g=N[1],I=Object(o.useState)(!1),G=Object(f.a)(I,2),S=G[0],q=G[1];Object(o.useEffect)((function(){u&&h.get("https://jsonplaceholder.typicode.com/posts?_limit=".concat(p,"&_page=").concat(l)).then((function(e){n([].concat(Object(x.a)(s),Object(x.a)(e.data))),j((function(e){return e+1})),w(e.headers["x-total-count"])})).finally((function(){q(!1),g(!1)}))}),[u]),Object(o.useEffect)((function(){return window.addEventListener("scroll",C),function(){window.removeEventListener("scroll",C)}}),[]),Object(o.useEffect)((function(){S&&s.length<100&&g(!0)}),[S]);var C=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<100&&q(!0)};return Object(d.jsx)(b.Provider,{value:{chats:s,fetching:u},children:t})},O=function(e){var t=e.onChatOpen,a=Object(o.useContext)(b),i=a.chats,s=a.fetching;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.k,{className:"shadowPanelHeader",separator:!1,children:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}),Object(d.jsx)(l.g,{children:i&&Object(d.jsxs)(l.i,{children:[i.map((function(e){return Object(d.jsx)(l.o,{before:Object(d.jsx)(l.h,{gradientColor:Object(l.z)(e.id),children:e.title.substring(0,2)}),onClick:function(){return t(e.id)},caption:Object(d.jsxs)(l.v,{children:[(a="FirstName: last message very long text",o=30,a.length>o?a.substring(0,o)+"...":a)," \xb7 2h"]}),children:e.title.substring(0,10)},e.id);var a,o})),s&&Object(d.jsx)(l.q,{})]})})]})},N=function(){return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.k,{children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(d.jsx)(l.g,{style:{height:"1000px"},children:Object(d.jsx)(l.n,{icon:Object(d.jsx)(m.a,{width:56,height:56})})})]})},u=function(e){var t=e.self,a=void 0!==t&&t,o=e.text,i=e.caption,s=void 0===i?"":i,n=e.hasAvatar,c=void 0!==n&&n,r=e.avatar,f=e.title,j=e.id;return Object(d.jsxs)("div",{className:"messageBox ".concat(a?"self":""),children:[c&&r&&Object(d.jsx)(l.c,{size:25}),c&&!r&&Object(d.jsx)(l.h,{size:25,gradientColor:Object(l.z)(j),children:f.substring(0,2)}),Object(d.jsxs)("div",{className:"messageTextBox ".concat(a?"self":""),children:[!a&&Object(d.jsx)("div",{className:"messageTitle",children:f}),Object(d.jsx)("div",{children:o}),s&&Object(d.jsx)("div",{className:"messageCaption",children:s})]})]})},g=[{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05",avatar:"t"},{id:100,text:"long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Egor",lastName:"Strupa",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05"},{id:15,text:"wefewfewfewf fjnklewiof fwfjio",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:1,text:"lon long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05",avatar:"t"},{id:100,text:"long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Egor",lastName:"Strupa",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05"},{id:15,text:"wefewfewfewf fjnklewiof fwfjio",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:1,text:"lon long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05",avatar:"t"},{id:100,text:"long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Egor",lastName:"Strupa",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05"},{id:15,text:"wefewfewfewf fjnklewiof fwfjio",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:1,text:"lon long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05",avatar:"t"},{id:100,text:"long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Egor",lastName:"Strupa",time:"21:05"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:1,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"poweofoewkfopwkoqfkwopekfokewopfkoewkfoewf",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05",avatar:"t"},{id:100,text:"text",firstName:"Ivan",lastName:"Shestakov",time:"21:05"},{id:15,text:"wefewfewfewf fjnklewiof fwfjio",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"},{id:1,text:"lon long long text",firstName:"Ivan",lastName:"Gavrilovich",time:"21:05"}],I=function(e){var t=e.isPublic,a=void 0!==t&&t,i=Object(o.useRef)(null);return Object(o.useEffect)((function(){setTimeout((function(){return i.current.scrollIntoView({behavior:"smooth"})}),320)}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"messageList",children:g.map((function(e,t){return Object(d.jsx)(u,{text:e.text,caption:e.time,hasAvatar:1!=e.id&&a,self:1==e.id,title:a&&e.firstName+" "+e.lastName,avatar:e.avatar,id:e.id},t)}))}),Object(d.jsx)("div",{ref:i})]})},G=function(e){var t=e.chatID,a=e.onClose,i=Object(o.useState)(""),s=Object(f.a)(i,2),n=s[0],c=s[1],r=Object(o.useState)(0),j=Object(f.a)(r,2),v=j[0],m=j[1],w=Object(o.useRef)();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.k,{className:"shadowPanelHeader",separator:!1,before:Object(d.jsx)(l.l,{onClick:function(){return a()}}),children:Object(d.jsx)(l.m,{before:Object(d.jsx)(l.h,{size:36,gradientColor:Object(l.z)(Date.now()),children:"Ch"}),status:"10 \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u0432",children:t})}),Object(d.jsx)(I,{isPublic:!0}),Object(d.jsx)(l.f,{vertical:"bottom",style:{paddingBottom:0},children:Object(d.jsxs)("div",{ref:w,children:[Object(d.jsx)(l.p,{wide:!0}),Object(d.jsx)(l.x,{value:n,onChange:function(e){return c(e.target.value)},onHeightChange:function(){return function(){var e=w.current;if(e){var t=e.offsetHeight;t!==v&&m(t)}}()},placeholder:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",after:Object(d.jsx)(o.Fragment,{children:Object(d.jsx)(l.y,{mode:"send",disabled:0===n.length})})})]})})]})},S=function(){var e=Object(o.useState)("bright_light"),t=Object(f.a)(e,2),a=t[0],s=(t[1],i.a.useState("events")),n=Object(f.a)(s,2),c=n[0],r=n[1],w=Object(o.useState)("messages"),x=Object(f.a)(w,2),h=x[0],b=x[1],u=Object(o.useState)(null),g=Object(f.a)(u,2),I=g[0],S=g[1],q=Object(o.useState)(!0),C=Object(f.a)(q,2),y=C[0],E=C[1],P=function(e){return r(e.currentTarget.dataset.story)};return Object(d.jsx)(l.d,{scheme:a,children:Object(d.jsx)(l.a,{children:Object(d.jsx)(l.b,{children:Object(d.jsx)(l.s,{header:Object(d.jsx)(l.k,{separator:!1}),style:{justifyContent:"center"},children:Object(d.jsx)(l.r,{animate:!0,spaced:!1,width:"100%",maxWidth:"100%",children:Object(d.jsxs)(l.e,{activeStory:c,tabbar:y&&Object(d.jsxs)(l.t,{children:[Object(d.jsx)(l.u,{onClick:P,selected:"events"===c,"data-story":"events",text:"\u0421\u043e\u0431\u044b\u0442\u0438\u044f",children:Object(d.jsx)(j.a,{})}),Object(d.jsx)(l.u,{onClick:P,selected:"messages"===c,"data-story":"messages",text:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",children:Object(d.jsx)(v.a,{})}),Object(d.jsx)(l.u,{onClick:P,selected:"profile"===c,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",children:Object(d.jsx)(m.a,{})})]}),children:[Object(d.jsx)(l.w,{id:"events",activePanel:"events",children:Object(d.jsx)(l.j,{id:"events",children:Object(d.jsx)(k,{})})}),Object(d.jsxs)(l.w,{id:"messages",activePanel:h,children:[Object(d.jsx)(l.j,{id:"messages",children:Object(d.jsx)(p,{children:Object(d.jsx)(O,{onChatOpen:function(e){S(e),b("chat"),E(!1)}})})}),Object(d.jsx)(l.j,{id:"chat",className:"chatPanel",children:Object(d.jsx)(G,{chatID:I,onClose:function(){b("messages"),E(!0)}})})]}),Object(d.jsx)(l.w,{id:"profile",activePanel:"profile",children:Object(d.jsx)(l.j,{id:"profile",children:Object(d.jsx)(N,{})})})]})})})})})})};r.a.send("VKWebAppInit"),n.a.render(Object(d.jsx)(S,{}),document.getElementById("root"))}},[[168,1,2]]]);
//# sourceMappingURL=main.e695cdae.chunk.js.map